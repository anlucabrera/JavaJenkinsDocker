<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:adm="http://github.com/adminfaces"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                template="#{layoutMB.template}"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui">

    <ui:define name="head-end">
        <h:outputStylesheet library="css" name="tablaDatos.css"/>
        <h:outputScript library="js" name="dialogs.js"/>
        <h:outputScript library="js" name="calendario.js" />
	<!-- Inicio estilos par proceso electoral -->
        <c:if test="#{utilidadesAcceso.procesoElectoralActivo}">
            <link rel="stylesheet" type="text/css" href="../../resources/css/procesoElectoral.css" media="screen"/>
	    <style type="text/css">
	    .ui-progressbar .ui-widget-header {
				background: #000000;
	    }
            .ui-progressbar .ui-progressbar-label {
                color: #ffffff;
            }
			</style>
        </c:if>
        <!-- Fin estilos par proceso electoral -->
    </ui:define>

    <ui:define name="title">
        Integración Expediente de Titulación
    </ui:define>

   
    <ui:define name="body" id="todo">
        <c:if test="#{integracionExpedienteTitulacionEstudiante.cargado}">
        <adm:breadcrumb title="Integración Expediente de Titulación"/>

        <div class="contenedor" id="contenedorExp">
            <c:if test="#{integracionExpedienteTitulacionEstudiante.tieneAcceso}">
                <!-- zona de importación de enums -->
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <div id="main-buttons" class="hidden-sm hidden-xs">
                                <h:form id="frmExpTitPeriodoAct">
                                <p:toolbar id="tb">
                                    <f:facet name="left">
                                        <p:outputLabel value="Periodo Escolar: #{caster.clavePeriodoToString(integracionExpedienteTitulacionEstudiante.rol.periodoActivo)}" />
                                        <p:spacer width="5" />

                                    </f:facet>
                                    <f:facet name="right">
                                        <p:commandLink
                                                class="btn btn-info"
                                                rendered="#{true}"
                                                disabled="#{false}"
                                                onclick="PF('modalAyuda').show();"
                                                title="Presione el botón para obtener ayuda sobre la operación de ésta herramienta."><i
                                                class="fa fa-question"/>
                                        </p:commandLink>
                                    </f:facet>
                                </p:toolbar>
                                </h:form>
                            </div>
                            <div class="box box-solid">
                                <div class="box-body">
                                    <c:if test="#{!integracionExpedienteTitulacionEstudiante.rol.existeExpediente}">
                                    <h:form id="frmExpTitIniciar">
                                        <h5 style="text-align: center;"><strong>Progreso Integración de Expediente</strong></h5>
                                        <br/>
                                        <p:progressBar value="#{integracionExpedienteTitulacionEstudiante.rol.progresoExpediente}" labelTemplate="{value}%" displayOnly="true"/>
                                        <br/>
                                        <br/>
                                        <h4 style="text-align: justify;">
                                           Para iniciar el registro de tu expediente de titulación es importante que verifiques que tus datos personales sean correctos, si los datos son correctos no realices ningún cambio, 
                                           en caso contrario realiza los cambios y procede a actualizar la información. Podrás actualizar siempre y cuando el Departamento de Titulación no haya validado tu expediente previamente.
                                        </h4>
                                        <br/>
                                        <br/>
                                        <div class="form-group">
                                            <div class="col-sm-12 col-md-12 col-lg-4"/>
                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                <p:commandButton id="btnGuardarExpediente" value="Integrar Expediente" actionListener="#{integracionExpedienteTitulacionEstudiante.iniciarIntegracionExpediente()}" 
                                                         icon="fa fa-pencil-square-o" class="btn-primary btn-block col-md-3" oncomplete="PF('frmExpTitDP')update();" update="@form"  process="@form"/>
                                            </div>
                                            <div class="col-sm-12 col-md-12 col-lg-4"/>
                                        </div>
                                    </h:form>
                                    </c:if>
                                    <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.existeExpediente}">
                                        <h5 style="text-align: justify;"><strong>Progreso Integración de Expediente</strong></h5>
                                        <br/>
                                        <p:progressBar value="#{integracionExpedienteTitulacionEstudiante.rol.progresoExpediente}" labelTemplate="{value}%" displayOnly="true"/>
                                        <br/>
                                        <br/>
                                        <p:tabView activeIndex="#{integracionExpedienteTitulacionEstudiante.rol.pestaniaActiva}">
                                        <!-- Pestaña Datos Personales -->
                                        <p:tab title="Datos personales">
                                            <h:form id="frmExpTitDP">
                                                    <p:outputPanel>
                                                        <div class="row" ondragstart="return false" onselectstart="return false" oncontextmenu="return false">
                                                            <div class="col-md-12">
                                                                <div class="box box-widget widget-user-2">
                                                                    <div class="row">
                                                                        <div class="form-group">
                                                                            <div class="col-sm-12 col-md-12 col-lg-2">
                                                                                <strong>No. Expediente</strong> 
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.expediente.expediente}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-3">
                                                                                <strong>Fecha Expediente</strong> 
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.fechaIntExp}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-3">
                                                                                <strong>Grado Académico</strong>      
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.nivelEducativo}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Programa Educativo</strong>
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.programaEducativo.nombre}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <br/><br/><br/><br/>
                                                                            <div class="col-sm-12 col-md-12 col-lg-2">
                                                                                <strong>Matricula</strong> 
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.expediente.matricula.matricula}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Nombre</strong>               
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.expediente.matricula.aspirante.idPersona.nombre}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-3">
                                                                                <strong>Apellido Paterno</strong>
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.expediente.matricula.aspirante.idPersona.apellidoPaterno}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-3">
                                                                                <strong>Apellido Materno</strong>
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.expediente.matricula.aspirante.idPersona.apellidoMaterno}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <br/><br/><br/><br/>
                                                                            <div class="col-sm-12 col-md-12 col-lg-3">
                                                                                <strong>Género</strong>
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.genero.abreviacion}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-3">
                                                                                <strong>Fecha de Nacimiento</strong>
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.fechaNacimiento}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-6">
                                                                                <strong>CURP</strong>       
                                                                                <p class="text-muted">
                                                                                #{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.expediente.matricula.aspirante.idPersona.curp}
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <br/>
                                                                    <br/> 
                                                                    <div class="row">
                                                                        <div class="form-group">
                                                                            <div class="col-sm-12 col-md-4 col-lg-4"/>
                                                                            <div class="col-sm-12 col-md-4 col-lg-4">
                                                                                <p:commandButton id="validarDatPer" value="Validar" actionListener="#{integracionExpedienteTitulacionEstudiante.validarDatosPersonales()}" 
                                                                                                 disabled="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro ne 'Inicio Integración'}"
                                                                                                 icon="fa fa-pencil-square-o" class="btn-primary btn-block col-md-3" oncomplete="PF('frmExpTitDP')update();" update="@form"  process="@form"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <br/> 
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </p:outputPanel>
                                                <h4 style="text-align: center; color: red;">Notas Importantes:</h4>
                                                <h4 style="text-align: justify;">1. En género "M" es la abreviación de Mujer y "H" la abreviación de Hombre.</h4>
                                                </h:form>
                                        </p:tab>
                                        <!-- Pestaña Datos de Contacto y Domicilio -->
                                        <p:tab title="Datos de Contacto y Domicilio" disabled="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Inicio Integración'}">
                                            <h:form id="frmExpTitCD">
                                            <p:outputPanel>
                                                        <div class="row" ondragstart="return false" onselectstart="return false" oncontextmenu="return false">
                                                            <div class="col-md-12">
                                                                <div class="box box-widget widget-user-2">
                                                                    <div class="row">
                                                                        <div class="form-group">
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Celular *</strong> 
                                                                                <p class="text-muted">                             
                                                                                <p:inputMask id="celular" class="form-control" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.medioComunicacion.telefonoMovil}" mask="(999)999-9999" required="true" requiredMessage="Es necesario que ingrese teléfono móvil de contacto"/>
                                                                                <p:message for="celular" display="tooltip" />
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Teléfono fijo *</strong> 
                                                                                <p class="text-muted">                               
                                                                                <p:inputMask id="telefono" class="form-control" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.medioComunicacion.telefonoFijo}" mask="(999)999-9999" required="true" requiredMessage="Es necesario que ingrese teléfono fijo de contacto"/>
                                                                                <p:message for="telefono" display="tooltip" />
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Email *</strong> 
                                                                                <p class="text-muted">                             
                                                                                <p:inputText id="email" class="form-control" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.medioComunicacion.email}" required="true" requiredMessage="Es necesario que ingrese un correo electrónico"/>
                                                                                <p:message for="email" ><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <br/><br/><br/><br/>
                                                                            <div class="col-sm-12 col-md-12 col-lg-6">
                                                                                <strong>Calle *</strong>      
                                                                                <p class="text-muted">
                                                                                <p:inputText id="calle" class="form-control" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.domicilio.calle}" required="true" requiredMessage="Es necesario que ingrese el nombre de la calle"/>
                                                                                <p:message for="calle"><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-6">
                                                                                <strong>Número *</strong>
                                                                                <p class="text-muted">
                                                                                <p:inputText id="num" class="form-control" placeholder="14,14-B"  value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.domicilio.numero}" required="true" requiredMessage="Es necesario que ingrese el número exterior"/>
                                                                                <p:message for="num"><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <br/><br/><br/><br/>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Estado *</strong>
                                                                                <p class="text-muted">
                                                                                <p:selectOneMenu id="estado" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.domicilio.idEstado}" required="true" requiredMessage="Es necesario que seleccione el estado">
                                                                                    <f:selectItem itemValue="#{null}"/>
                                                                                    <f:selectItems value="#{integracionExpedienteTitulacionEstudiante.rol.listaEstadosDomicilioRadica}"/>
                                                                                    <p:ajax listener="#{integracionExpedienteTitulacionEstudiante.selectMunicipio()}" update="municipio"/>
                                                                                </p:selectOneMenu>
                                                                                <p:message for="estado"><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Municipio *</strong>
                                                                                <p class="text-muted">
                                                                                <p:selectOneMenu id="municipio" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.domicilio.idMunicipio}" required="true" requiredMessage="Es necesario que seleccione el municipio">
                                                                                    <f:selectItem itemValue="#{null}"/>
                                                                                    <f:selectItems value="#{integracionExpedienteTitulacionEstudiante.rol.listaMunicipiosRadica}"/>
                                                                                    <p:ajax listener="#{integracionExpedienteTitulacionEstudiante.selectAsentamiento()}" update="asentamiento"/>
                                                                                </p:selectOneMenu>
                                                                                <p:message for="municipio"><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Asentamiento *</strong>
                                                                                <p class="text-muted">
                                                                                <p:selectOneMenu id="asentamiento" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.domicilio.idAsentamiento}" filter="true" filterMatchMode="startsWith" style="width:  375px" required="true" requiredMessage="Es necesario que seleccione la localidad">
                                                                                    <f:selectItem itemValue="#{null}"/>
                                                                                    <f:selectItems value="#{integracionExpedienteTitulacionEstudiante.rol.listaAsentamientos}"/>
                                                                                    <p:ajax/>
                                                                                </p:selectOneMenu>
                                                                                <p:message for="asentamiento"><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <br/>
                                                                    <br/> 
                                                                    <div class="row">
                                                                        <div class="form-group">
                                                                            <div class="col-sm-12 col-md-4 col-lg-4"/>
                                                                            <div class="col-sm-12 col-md-4 col-lg-4">
                                                                                <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Datos Personales'}">
                                                                                <p:commandButton id="validarDomCom" value="Guardar y Validar" actionListener="#{integracionExpedienteTitulacionEstudiante.validarDomCom()}" 
                                                                                             icon="fa fa-check-square" class="btn-primary btn-block" oncomplete="PF('frmExpTitCD')update();" update="@form"  process="@form"/>
                                                                                </c:if>
                                                                                <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro ne 'Datos Personales'}">
                                                                                <p:commandButton id="actualizarDomCom" value="Actualizar" actionListener="#{integracionExpedienteTitulacionEstudiante.actualizarDomCom()}" 
                                                                                                 disabled="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Fin Integración'}"
                                                                                                 icon="fa-pencil-square-o" class="btn-primary btn-block" oncomplete="PF('frmExpTitCD')update();" update="@form"  process="@form"/>
                                                                                </c:if>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-4 col-lg-4"/>
                                                                        </div>
                                                                    </div>
                                                                    <br/> 
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </p:outputPanel> 
                                            <h4 style="text-align: justify;">* Campos que debes llenar obligatoriamente </h4>
                                            <br/>
                                            <h4 style="text-align: center; color: red;">Notas Importantes:</h4>
                                            <h4 style="text-align: justify;">1. El correo electrónico que proporciones debe ser personal (no institucional) y verifica previamente que tengas acceso a el.</h4>
                                            </h:form>
                                        </p:tab>
                                        <!-- Pestaña Antecedentes Académicos -->
                                        <p:tab title="Antecedentes Académicos" disabled="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Inicio Integración' || integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Datos Personales'}">
                                            <h:form id="frmExpTitAA">
                                            <p:outputPanel>
                                                        <div class="row" ondragstart="return false" onselectstart="return false" oncontextmenu="return false">
                                                            <div class="col-md-12">
                                                                <div class="box box-widget widget-user-2">
                                                                    <div class="row">
                                                                        <div class="form-group">
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Estado *</strong> 
                                                                                <p class="text-muted">
                                                                                <p:selectOneMenu id="estadoIEMS" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.iems.localidad.municipio.estado.idestado}" required="true" requiredMessage="Es necesario que seleccione el estado">
                                                                                    <f:selectItem itemValue="#{null}"/>
                                                                                    <f:selectItems value="#{integracionExpedienteTitulacionEstudiante.rol.listaEstadosIEMS}"/>
                                                                                    <p:ajax listener="#{integracionExpedienteTitulacionEstudiante.selectMunicipioIems()}" update="municipioIEMS"/>
                                                                                </p:selectOneMenu>
                                                                                <p:message for="estadoIEMS"><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Municipio *</strong> 
                                                                                <p class="text-muted">
                                                                                    <p:selectOneMenu id="municipioIEMS" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.iems.localidad.municipio.municipioPK.claveMunicipio}" required="true" requiredMessage="Es necesario que seleccione el municipio" valueChangeListener="#{integracionExpedienteTitulacionEstudiante.actualizarIEMS}">
                                                                                    <f:selectItem itemValue="#{null}"/>
                                                                                    <f:selectItems value="#{integracionExpedienteTitulacionEstudiante.rol.listaMunicipiosIEMS}"/>
                                                                                    <p:ajax listener="#{integracionExpedienteTitulacionEstudiante.selectLocalidadIems()}" update="localidadIEMS"/>
                                                                                </p:selectOneMenu>
                                                                                <p:message for="municipioIEMS"><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Localidad *</strong> 
                                                                                <p class="text-muted">
                                                                                <p:selectOneMenu id="localidadIEMS" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.iems.localidad.localidadPK.claveLocalidad}" required="true" requiredMessage="Es necesario que seleccione el municipio">
                                                                                    <f:selectItem itemValue="#{null}"/>
                                                                                    <f:selectItems value="#{integracionExpedienteTitulacionEstudiante.rol.listaLocalidadesIEMS}"/>
                                                                                    <p:ajax listener="#{integracionExpedienteTitulacionEstudiante.selectIems()}" update="iems"/>
                                                                                </p:selectOneMenu>
                                                                                <p:message for="localidadIEMS"><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <br/><br/><br/><br/>
                                                                            <div class="col-sm-12 col-md-12 col-lg-8">
                                                                                <strong>IEMS *</strong>      
                                                                                <p class="text-muted">
                                                                                <p:selectOneMenu id="iems" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.datosAcademicos.institucionAcademica}" filter="true" filterMatchMode="startsWith" required="true" requiredMessage="Es necesario que seleccione la localidad">
                                                                                    <f:selectItem itemValue="#{null}"/>
                                                                                    <f:selectItems value="#{integracionExpedienteTitulacionEstudiante.rol.listaIEMS}"/>
                                                                                    <p:ajax/>
                                                                                </p:selectOneMenu>
                                                                                <p:message for="iems"><p:autoUpdate/></p:message>
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12 col-lg-4">
                                                                                <strong>Fecha Terminación *</strong>
                                                                                <p class="text-muted">
                                                                                <p:calendar locale="es" id="fecTer" value="#{integracionExpedienteTitulacionEstudiante.rol.dtoExpedienteTitulacion.datosAcademicos.fechaTerminacion}" pattern="yyyy-MM-dd" mask="true" required="true" requiredMessage="Es necesario que ingrese la fecha de terminación"/>
                                                                                <p:message for="fecTer" display="tooltip" />
                                                                                </p>
                                                                                <hr/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <br/>
                                                                    <br/> 
                                                                    <div class="row">
                                                                        <div class="form-group">
                                                                            <div class="col-sm-12 col-md-4 col-lg-4"/>
                                                                            <div class="col-sm-12 col-md-4 col-lg-4">
                                                                                <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Domicilio y Comunicaciones'}">
                                                                                <p:commandButton id="validarAntAcad" value="Guardar y Validar" actionListener="#{integracionExpedienteTitulacionEstudiante.validarAntAcademicos()}" 
                                                                                             icon="fa fa-check-square" class="btn-primary btn-block" oncomplete="PF('frmExpTitAA')update();" update="@form"  process="@form"/>
                                                                                </c:if>
                                                                                <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro ne 'Domicilio y Comunicaciones'}">
                                                                                 <p:commandButton id="actualizarAntAcad" value="Actualizar" actionListener="#{integracionExpedienteTitulacionEstudiante.actualizarAntAcademicos()}" 
                                                                                                  disabled="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Fin Integración'}"
                                                                                                  icon="fa fa-pencil-square-o" class="btn-primary btn-block" oncomplete="PF('frmExpTitAA')update();" update="@form"  process="@form"/>
                                                                                </c:if>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-4 col-lg-4"/>
                                                                        </div>
                                                                    </div>
                                                                    <br/> 
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </p:outputPanel> 
                                            <h4 style="text-align: justify;">* Campos que debes llenar obligatoriamente </h4>
                                            <br/>
                                            <h4 style="text-align: center; color: red;">Notas Importantes:</h4>
                                            <h4 style="text-align: justify;">1. La fecha de terminación es en la que se expidió tu certificado de bachillerato.</h4>
                                            <h4 style="text-align: justify;">2. Soló en caso de que el certificado de bachillerato sea un duplicado, tomar la fecha de terminación que viene en el reverso. </h4>
                                            <h4 style="text-align: justify;">3. Si no encuentras tu bachillerato, verifica que estés ingresando correctamente estado, municipio y localidad donde se ubica, en caso de que sigas sin encontrarlo favor de escribir al siguiente correo: sistemas@utxicotepec.edu.mx </h4>                                          
                                            </h:form>
                                        </p:tab>
                                        <!-- Pestaña Documentos para Expediente -->
                                        <p:tab title="Documentos para Expediente" disabled="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Inicio Integración' || integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Datos Personales' || integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Domicilio y Comunicaciones'}">
                                            <p:outputPanel>
                                                <p:autoUpdate/>
                                                <div class="row" ondragstart="return false" onselectstart="return false" oncontextmenu="return false">
                                                    <div class="col-md-12">
                                                        <div class="box box-widget widget-user-2">
                                                            <div class="row">
                                                                <div class="col-sm-12 border-right">
                                                                    <div class="description-block">
                                                                        <c:if test="#{!integracionExpedienteTitulacionEstudiante.rol.existeDocs}">
                                                                        <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.eventoActivo.nivel eq 'TSU'}">
                                                                            <div class="row">
                                                                                <o:form id="frmFotoExpTSU" enctype="multipart/form-data">
                                                                                        <div class="col-sm-12 col-md-12 col-lg-12" style="border-color: #3385b0; border-width: 2px; border-style: solid;">
                                                                                            <p:outputPanel>            
                                                                                                <p:autoUpdate/>
                                                                                                <p:outputLabel style="height:100%; width: 100%; object-fit: contain; font-size: medium" value="Fotografía T.S.U." />
                                                                                                <h5 style="text-align: justify;">La fotografía debe ser de estudio, no descolorida y con las características correspondientes:</h5>
                                                                                                <ul style="text-align: justify;">
                                                                                                    <li>La fotografía debe ser a COLOR con FONDO BLANCO y SIN SOMBRAS.</li>
                                                                                                    <li>Se recomienda un tamaño de 6x9 cm.</li>
                                                                                                    <li>La fotografía deberá ser una en la que el solicitante esté mirando directamente a la cámara</li>
                                                                                                    <li>El solicitante no puede estar mirando hacia abajo o a los lados</li>
                                                                                                    <li>La cabeza del solicitante, incluyendo tanto la cara como el cabello, deben ser mostrados en su totalidad con la frente y las orejas descubiertas</li>
                                                                                                    <li>El solicitante no deberá usar gorras ni ningún otro accesorio que cubra total o parcialmente su cara</li>
                                                                                                    <li>La imagen no debe ser tratada con "filtros" o "retoques"</li>
                                                                                                </ul>
                                                                                            </p:outputPanel>
                                                                                            <br/>
                                                                                            <center><o:inputFile id="fileFotoTSU" value="#{cargaDocumentosExpedienteEstudiante.fileFotoTSU}" accept="image/png,image/jpg,image/jpeg" acceptMessage="Sólo se permiten imágenes JPG/PNG." maxsize="#{caster.docsTitulacionTamanioLimite}" maxsizeMessage="El tamaño máximo permitido son #{caster.bytesToMegabytes(caster.docsTitulacionTamanioLimite)}." /></center>
                                                                                            <br/>
                                                                                            <h:message id="messageForFileFotoTSU" for="fileFotoTSU" />
                                                                                            <br/>
                                                                                            <h:commandButton onclick="PF('bloqueoCargaFile').show()"  value="Subir archivo" class="btn-primary btn-info" action="#{cargaDocumentosExpedienteEstudiante.subirDocumentoFotoTSU}" />
                                                                                            <br/>
                                                                                            <br/>
                                                                                        </div>
                                                                                </o:form>
                                                                            </div>
                                                                        </c:if>
                                                                        <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.eventoActivo.nivel ne 'TSU'}">
                                                                            <div class="row">
                                                                                <o:form id="frmFotoExpIL" enctype="multipart/form-data">
                                                                                        <div class="col-sm-12 col-md-12 col-lg-12" style="border-color: #3385b0; border-width: 2px; border-style: solid;">
                                                                                            <p:outputPanel>            
                                                                                                <p:autoUpdate/>
                                                                                                <p:outputLabel style="height:100%; width: 100%; object-fit: contain; font-size: medium" value="Fotografía Ingeniería o Licenciatura." />
                                                                                                <h5 style="text-align: justify;">La fotografía debe ser de estudio, no descolorida y con las características correspondientes:</h5>
                                                                                                <ul style="text-align: justify;">
                                                                                                    <li>La fotografía debe ser a COLOR con FONDO BLANCO y SIN SOMBRAS.</li>
                                                                                                    <li>Se recomienda un tamaño de 6x9 cm.</li>
                                                                                                    <li>La fotografía deberá ser una en la que el solicitante esté mirando directamente a la cámara</li>
                                                                                                    <li>El solicitante no puede estar mirando hacia abajo o a los lados</li>
                                                                                                    <li>La cabeza del solicitante, incluyendo tanto la cara como el cabello, deben ser mostrados en su totalidad con la frente y las orejas descubiertas</li>
                                                                                                    <li>El solicitante no deberá usar gorras ni ningún otro accesorio que cubra total o parcialmente su cara</li>
                                                                                                    <li>La imagen no debe ser tratada con "filtros" o "retoques"</li>
                                                                                                </ul>
                                                                                            </p:outputPanel>
                                                                                            <br/>
                                                                                            <center><o:inputFile id="fileFotoIL" value="#{cargaDocumentosExpedienteEstudiante.fileFotoIL}" accept="image/png,image/jpg,image/jpeg" acceptMessage="Sólo se permiten imágenes JPG/PNG." maxsize="#{caster.docsTitulacionTamanioLimite}" maxsizeMessage="El tamaño máximo permitido son #{caster.bytesToMegabytes(caster.docsTitulacionTamanioLimite)}." /></center>
                                                                                            <br/>
                                                                                            <h:message id="messageForFileFotoIL" for="fileFotoIL" />
                                                                                            <br/>
                                                                                            <h:commandButton onclick="PF('bloqueoCargaFile').show()"  value="Subir archivo" class="btn-primary btn-info" action="#{cargaDocumentosExpedienteEstudiante.subirDocumentoFotoIL}" />
                                                                                            <br/>
                                                                                            <br/>
                                                                                        </div>
                                                                                </o:form>
                                                                            </div>
                                                                        </c:if>
                                                                        </c:if>
                                                                        <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.existeDocs}">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <br/>
                                                                                <br/>
                                                                                <p:outputLabel style="height:100%; width: 100%; object-fit: contain; font-size: medium" value="Expediente Actual" />
                                                                                <br/>
                                                                                <br/>
                                                                                <br/>
                                                                            </div>
                                                                            <div class="col-md-12">
                                                                                <h:form id="frmDocsExp">
<!--                                                                                    <p:remoteCommand name="actualizarListaDocs" update="@form:tblDocsExp" />-->
                                                                                    <p:dataTable id="tblDocsExp" emptyMessage="Sin datos en el periodo seleccionado." value="#{integracionExpedienteTitulacionEstudiante.rol.listaDocExpTit}" var="docsExp"
                                                                                                 resizeMode="expand"
                                                                                                 tableStyleClass="table table-bordered table-hover table-condensed table-responsive">
                                                                                        <p:columnGroup type="header">
                                                                                            <p:row>
                                                                                                <p:column headerText="Opciones" width="120"/>
                                                                                                <p:column headerText="Archivo" width="200" />
                                                                                                <p:column headerText="Fecha de Carga" width="100" />
                                                                                                <p:column headerText="Validado" width="80" />
                                                                                                <p:column headerText="Observaciones" width="200" />
                                                                                                <p:column headerText="Fecha de Validación" width="100" />
                                                                                            </p:row>
                                                                                        </p:columnGroup>
                                                                                        <c:set var="status" value="#{integracionExpedienteTitulacionEstudiante.consultarStatusDocumento(docsExp.documentoExpediente)}" />
                                                                                        <p:column style="text-align: center;">
                                                                                            <div class="btn-group">
                                                                                                <p:commandButton class="btn btn-info btn-sm" icon="fa fa-trash" actionListener="#{cargaDocumentosExpedienteEstudiante.eliminarDocumento(docsExp)}" title="Eliminar documento." disabled="#{!empty status ||  integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Fin Integración'}">
                                                                                                    <p:confirm header="Eliminar documento" message="¿Está seguro de eliminar el documento #{caster.rutaToArchivoNombre(docsExp.ruta)}?" icon="ui-icon-alert"/>
                                                                                                </p:commandButton>
                                                                                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                                                                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check"/>
                                                                                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
                                                                                                </p:confirmDialog>  
                                                                                                <p:commandLink class="btn btn-info btn-sm" ajax="false" action="#{cargaDocumentosExpedienteEstudiante.descargarDocumento(docsExp)}" target="_blank" title="Descargar documento."><i class="fa fa-download" /></p:commandLink>
                                                                                            </div>
                                                                                        </p:column>
                                                                                        <p:column style="text-align: justify;"><h:outputText value="#{caster.rutaToArchivoNombre(docsExp.ruta)}" /></p:column>
                                                                                        <p:column style="text-align: center;"><h:outputText value="#{docsExp.fechaCarga}"><f:convertDateTime type="date" pattern="dd-MM-yyyy"/></h:outputText></p:column>                                                               
                                                                                        <p:column style="text-align: center;"><h:outputText value="#{!empty status?'Si':'No'}"/></p:column>
                                                                                        <p:column style="text-align: justify;"><h:outputText value="#{docsExp.observaciones}" /></p:column>
                                                                                        <p:column style="text-align: center;"><h:outputText value="#{docsExp.fechaValidacion}"><f:convertDateTime type="date" pattern="dd-MM-yyyy"/></h:outputText></p:column>
                                                                                     </p:dataTable>
                                                                                </h:form>
                                                                            </div>
                                                                        </div>                                                                        
                                                                        </c:if>
                                                                    </div>
                                                                </div>                                                      
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </p:outputPanel>  
                                        </p:tab>
                                        <!-- Pestaña Finalización del Registro -->
                                        <p:tab title="Fin de Integración" disabled="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Inicio Integración' || integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Datos Personales' || integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Domicilio y Comunicaciones' || integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Antecedentes Académicos'}">
                                            <h:form id="frmExpTitFin">
                                            <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro ne 'Fin Integración'}">
                                            <p:outputPanel>
                                            <h4 style="text-align: justify;">Al dar clic en el botón "Finalizar": concluyes con el proceso de integración de expediente, confirmas que tu información registrada es correcta y notificas a titulación que puede consultar tu expediente.</h4>
                                            <br/>
                                            </p:outputPanel> 
                                            <div class="row">
                                                <center>
                                                <div class="form-group">
                                                    <div class="col-sm-12 col-md-4 col-lg-4"/>
                                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                                        <p:commandButton id="finalizarIntegracion" value="Finalizar" actionListener="#{integracionExpedienteTitulacionEstudiante.finalizarIntegracion()}" 
                                                                         disabled="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Fin Integración'}"
                                                                         icon="fa fa-check-square" class="btn-primary btn-block" oncomplete="PF('frmExpTitFin')update();" update="@form"  process="@form"/></div>
                                                    <div class="col-sm-12 col-md-4 col-lg-4"/>
                                                </div>
                                                </center>
                                            </div>
                                            <br/>
                                            <h4 style="text-align: justify; color: red;">Notas Importantes:</h4>
                                            <ol>
                                            <li style="text-align: justify; font-size: 16px;">Antes de finalizar, verifica nuevamente tu información en cada apartado, en caso de que hayas ingresado incorrectamente algún dato podrás modificarlo y dar clic en "Actualizar" para guardar los cambios realizados.</li>
                                            <li style="text-align: justify; font-size: 16px;">Una vez que finalices el proceso no podrás actualizar tus datos.</li>
                                            <li style="text-align: justify; font-size: 16px;">Si tienes alguna duda sobre el proceso y/o fechas de titulación, favor de escribir al siguiente correo: coordinacion.titulacion@utxicotepec.edu.mx </li>
                                            </ol>
                                            </c:if>
                                            <c:if test="#{integracionExpedienteTitulacionEstudiante.rol.pasoRegistro eq 'Fin Integración'}">
                                            <p:outputPanel>
                                            <h4 style="text-align: justify;">Has concluído con la integración de expediente, la Coordinación de Titulación te informará en que fechas debes acudir con ellos.</h4>
                                            <br/>
                                            </p:outputPanel> 
                                            <br/>
                                            <h4 style="text-align: justify; color: red;">Notas Importantes:</h4>
                                            <ol>
                                            <li style="text-align: justify; font-size: 16px;">Si te equivocaste al ingresar un dato, favor de escribir al correo: sistemas@utxicotepec.edu.mx, indicando tu matricula y el error. </li>
                                            <li style="text-align: justify; font-size: 16px;">Si tienes alguna duda sobre el proceso y/o fechas de titulación, puedes pedir información al correo: coordinacion.titulacion@utxicotepec.edu.mx </li>
                                            </ol>
                                            </c:if>
                                            </h:form>
                                        </p:tab>
                                        <p:blockUI block="informacion" widgetVar="bloqueoCargaFile">
                                            Cargando archivo espere por favor.<br />
                                        </p:blockUI>
                                    </p:tabView>
                                    </c:if>
                                </div>
                            </div>
                        </div>
                    </div>
                <!-- Zona de cuadros de diálogo -->
                <!-- Zona de cuadros de diálogo -->
                <p:dialog id="modalAyuda"
                          widgetVar="modalAyuda" width="700" height="auto" closeOnEscape="true" visible="#{false}" showEffect="fade" hideEffect="fade"
                          modal="true" draggable="true" header="Ayuda" styleClass="panel panel-primary" responsive="true" resizable="false" closable="false" maximizable="true">
                    <div class="box box-primary">
                        <div class="box-header"><i class="ion ion-clipboard"></i><h3 class="box-title">Elementos necesarios para integrar expediente de titulación</h3></div>
                        <div class="box-body">
                            <ul class="todo-list">
                                <c:forEach items="#{integracionExpedienteTitulacionEstudiante.rol.instrucciones}" var="instruccion">
                                    <li><span class="text" style="text-align: justify;"><i class="fa fa-ellipsis-v"></i><i class="fa fa-ellipsis-v"></i> #{instruccion}</span></li>
                                </c:forEach>
                            </ul>
                        </div>
                        <div class="box-footer clearfix no-border"><button type="button" class="btn btn-primary pull-right" onclick="PF('modalAyuda').hide();"><i class="fa fa-times"></i> Cerrar</button></div>
                    </div>
                </p:dialog>
            </c:if>
            <c:if test="#{!integracionExpedienteTitulacionEstudiante.tieneAcceso}">
                <p:panel id="box-colors-panel" header="Acceso no autorizado" styleClass="box-fatal box-solid">
                    <h:panelGrid columns="2" cellpadding="10">
                        <h:outputText value="El acceso solo está autorizado para estudiantes."/>
                    </h:panelGrid>
                    <f:facet name="footer"></f:facet>
                </p:panel>
            </c:if>
        </div>
        <script>
            //collapseSidebar(); activar para colapsar barra lateral
        </script>
        </c:if>
    </ui:define>
</ui:composition>


