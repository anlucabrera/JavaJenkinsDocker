<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:adm="http://github.com/adminfaces"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                template="/WEB-INF/templates/template.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:pe="http://primefaces.org/ui/extensions">

    <ui:define name="head-end">
        <script type="text/javascript">
            function myconfig() {
                console.log("ejemplo");
            }
            ;

        </script>
        <style type="text/css">
            @media print{
                /* indicamos el salto de pagina */
                .saltoDePagina{
                    display:block;
                    page-break-inside:auto  !important;
                }
            }
        </style>
        <h:outputStylesheet library="css" name="tablaDatos.css"/>
        <!-- Inicio estilos par proceso electoral -->
        <c:if test="#{utilidadesAcceso.procesoElectoralActivo}">
            <link rel="stylesheet" type="text/css" href="../../resources/css/procesoElectoral.css" media="screen" />
        </c:if>
        <c:if test="#{!utilidadesAcceso.procesoElectoralActivo}">
            <link rel="stylesheet" type="text/css" href="../../resources/css/estilosGeneralesPrint.css" media="screen" />
        </c:if>
        <!-- Fin estilos par proceso electoral -->
        <h:outputStylesheet library="css" name="tablaDatos.css"/>
        <h:outputScript library="js" name="dialogs.js"/>
        <h:outputScript library="js" name="calendario.js" />
    </ui:define>

    <ui:define name="title">
        Carta de no adeudo
    </ui:define>

    <ui:define name="description">
        | Estudiante
    </ui:define>

    <ui:define name="body">
        <c:if test="#{cartaNoAdeudoEstudiante.cargado}">
            <adm:breadcrumb title="Carta de no adeudo"/>
            <div class="contenedor">
                <c:if test="#{cartaNoAdeudoEstudiante.tieneAcceso}">
                    <!-- zona de importación de enums -->
                    <h:form id="frm" prependId="false" class="form-inline">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <div id="main-buttons" class="hidden-sm hidden-xs">
                                    <p:toolbar id="tb">
                                        <f:facet name="right">
                                            <p:commandLink class="btn btn-success" rendered="#{true}" disabled="#{false}"
                                                           process="@this"
                                                           title="Imprimir carta">
                                                <i class="fa fa-print" />
                                                <p:printer target="CN" />
                                            </p:commandLink>
                                            <p:spacer width="15px"/>
                                            <p:commandLink class="btn btn-info" rendered="#{true}" disabled="#{false}"
                                                           onclick="PF('modalAyuda').show();"
                                                           process="@this"
                                                           title="Presione el botón para obtener ayuda sobre la operación de ésta herramienta."><i class="fa fa-question" />
                                            </p:commandLink>

                                        </f:facet>
                                    </p:toolbar>
                                </div>
                                <div class="box box-solid">
                                    <div class="box-body">
                                            <center>
                                                <c:set var="carta" value="#{cartaNoAdeudoEstudiante.rol.cartaGeneral}"/>
                                                <p:panel id="CN" style="overflow: hidden">
                                                    <p:panelGrid style="width: 100%" >
                                                        <!--f:facet name="header"-->
                                                        <p:row style="height: 50px">
                                                            <p:column colspan="5" rowspan="1">
                                                                <img src="../../resources/img/utxj.png" alt="" height="80px"/>
                                                            </p:column>
                                                            <p:column colspan="10" style="font-weight: bold; text-align: center; font-size: x-large;">
                                                                <h5><strong>HOJA DE NO ADEDUDO #{caster.anioFecha(cartaNoAdeudoEstudiante.rol.fechaImpresion)}</strong></h5>
                                                            </p:column>
                                                        </p:row>
                                                        <!--/f:facet-->
                                                        <p:row style="height: 30px">
                                                            <p:column colspan="1" style="text-align: right"><strong>NOMBRE:</strong></p:column>
                                                            <p:column colspan="12" style="text-align: left">#{cartaNoAdeudoEstudiante.rol.estudiante.aspirante.idPersona.nombre.concat(" ").concat(cartaNoAdeudoEstudiante.rol.estudiante.aspirante.idPersona.apellidoPaterno).concat(" ").concat(cartaNoAdeudoEstudiante.rol.estudiante.aspirante.idPersona.apellidoMaterno)}</p:column>
                                                            <p:column colspan="1" style="text-align: right"><strong>FECHA:</strong></p:column>
                                                            <p:column colspan="2" style="text-align: left">#{caster.fechaToString(cartaNoAdeudoEstudiante.rol.fechaImpresion)}</p:column>
                                                        </p:row>
                                                        <p:row style="height: 30px">
                                                            <p:column colspan="1" style="text-align: right"><strong>CARRERA:</strong></p:column>
                                                            <p:column colspan="12" style="text-align: left">#{carta.pe.nombre}</p:column>
                                                            <p:column colspan="1" style="text-align: right"><strong>MATRÍCULA:</strong></p:column>
                                                            <p:column colspan="2" style="text-align: left">#{cartaNoAdeudoEstudiante.rol.estudiante.matricula}</p:column>
                                                        </p:row>
                                                        <p:row/>
                                                        <p:row>
                                                            <p:column colspan="3" styleClass="ui-widget-header eje" style="font-weight: bold; text-align: center!important;">
                                                                <h4 style="color: #ffffff;"><strong>Área</strong></h4>
                                                            </p:column>
                                                            <p:column colspan="1" styleClass="ui-widget-header eje" style="font-weight: bold; text-align: center!important;width: 20px">
                                                                <h4 style="color: #ffffff;"><strong>Estatus</strong></h4>
                                                            </p:column>
                                                            <p:column colspan="3" styleClass="ui-widget-header eje" style="font-weight: bold; text-align: center!important;">
                                                                <h4 style="color: #ffffff;"><strong>Adeudo</strong></h4>
                                                            </p:column>
                                                            <p:column colspan="7" styleClass="ui-widget-header eje" style="font-weight: bold; text-align: center!important;">
                                                                <h4 style="color: #ffffff;"><strong>Observaciones</strong></h4>
                                                            </p:column>
                                                            <p:column colspan="1" styleClass="ui-widget-header eje" style="font-weight: bold; text-align: center!important; width: 20px">
                                                                <h4 style="color: #ffffff;"><strong>Correo</strong></h4>
                                                            </p:column>
                                                        </p:row>
                                                        <!--Direccion de carrera -->
                                                        <p:row style="height: 100px">
                                                            <p:column colspan="3" styleClass="actividad" style="font-weight: bold; text-align: center;"><h4>Dirección de Carrera</h4></p:column>
                                                            <p:column colspan="1" style="text-align: center;width: 20px"> <h4><span class="label label-#{cartaNoAdeudoEstudiante.rol.labelDireccion}"><i class="fa fa-#{cartaNoAdeudoEstudiante.rol.classDireccion}"/> #{carta.direccionCarrera.statusRev}</span></h4></p:column>
                                                            <p:column colspan="3">#{carta.direccionCarrera.adeudoDirrecionCarrera.adeudo.adeudo}</p:column>
                                                            <p:column colspan="7">#{carta.direccionCarrera.adeudoDirrecionCarrera.observaciones}</p:column>
                                                            <p:column colspan="1" style="width: 20px">#{carta.direccionCarrera.correo}</p:column>
                                                        </p:row>
                                                        <!--Biblioteca -->
                                                        <p:row style="height: 100px">
                                                            <p:column colspan="3" styleClass="actividad" style="font-weight: bold; text-align: center;"><h4>Biblioteca</h4></p:column>
                                                            <p:column colspan="1" style="text-align: center;width: 20px"> <h4><span class="label label-#{cartaNoAdeudoEstudiante.rol.labelBiblioteca}"><i class="fa fa-#{cartaNoAdeudoEstudiante.rol.classBiblioteca}"/> #{carta.biblioteca.statusRev}</span></h4></p:column>
                                                            <p:column colspan="3">#{carta.biblioteca.aduedoBiblioteca.adeudo.adeudo}</p:column>
                                                            <p:column colspan="7">#{carta.biblioteca.aduedoBiblioteca.observaciones}</p:column>
                                                            <p:column colspan="1" style="width: 20px">#{carta.biblioteca.correo}</p:column>
                                                        </p:row>
                                                        <!--Departamento de Información y Estadística -->
                                                        <p:row style="height: 100px">
                                                            <p:column colspan="3" styleClass="actividad" style="font-weight: bold; text-align: center;"><h4>Departamento de Información y Estadística </h4></p:column>
                                                            <p:column colspan="1" style="text-align: center;width: 20px"> <h4><span class="label label-#{cartaNoAdeudoEstudiante.rol.labelIye}"><i class="fa fa-#{cartaNoAdeudoEstudiante.rol.classIye}"/> #{carta.iye.statusRev}</span></h4></p:column>
                                                            <p:column colspan="3">#{carta.iye.aduedoIyE.adeudo.adeudo}</p:column>
                                                            <p:column colspan="7">#{carta.iye.aduedoIyE.observaciones}</p:column>
                                                            <p:column colspan="1" style="width: 20px">#{carta.iye.correo}</p:column>
                                                        </p:row>
                                                        <!--Coordinación de Estadía  -->
                                                        <p:row style="height: 100px">
                                                            <p:column colspan="3" styleClass="actividad" style="font-weight: bold; text-align: center;"><h4>Coordinación de Estadía</h4></p:column>
                                                            <p:column colspan="1" style="text-align: center;width: 20px"> <h4><span class="label label-#{cartaNoAdeudoEstudiante.rol.labelEstadia}"><i class="fa fa-#{cartaNoAdeudoEstudiante.rol.classEstadia}"/> #{carta.cordinacionEstadia.statusRev}</span></h4></p:column>
                                                            <p:column colspan="3">#{carta.cordinacionEstadia.aduedoEstadia.adeudo.adeudo}</p:column>
                                                            <p:column colspan="7">#{carta.cordinacionEstadia.aduedoEstadia.observaciones}</p:column>
                                                            <p:column colspan="1" style="width: 20px">#{carta.cordinacionEstadia.correo}</p:column>
                                                        </p:row>
                                                        <!--Seguimiento a Egresados  -->
                                                        <p:row style="height: 100px">
                                                            <p:column colspan="3" styleClass="actividad" style="font-weight: bold; text-align: center;"><h4>Seguimiento a Egresados</h4></p:column>
                                                            <p:column colspan="1" style="text-align: center;width: 20px"> <h4><span class="label label-#{cartaNoAdeudoEstudiante.rol.labelEgresados}"><i class="fa fa-#{cartaNoAdeudoEstudiante.rol.classEgresados}"/> #{carta.seguimientoEgresados.statusRev}</span></h4></p:column>
                                                            <p:column colspan="3">#{carta.seguimientoEgresados.aduedoEgresados.adeudo.adeudo}</p:column>
                                                            <p:column colspan="7">#{carta.seguimientoEgresados.aduedoEgresados.observaciones}</p:column>
                                                            <p:column colspan="1" style="width: 20px">#{carta.seguimientoEgresados.correo}</p:column>
                                                        </p:row>
                                                        <!--Departamento de Recursos Materiales y Servicios Generales -->
                                                        <p:row style="height: 100px">
                                                            <p:column colspan="3" styleClass="actividad" style="font-weight: bold; text-align: center;"><h4>Departamento de Recursos Materiales y Servicios Generales</h4></p:column>
                                                            <p:column colspan="1" style="text-align: center;width: 20px"> <h4><span class="label label-#{cartaNoAdeudoEstudiante.rol.labelRMateriales}"><i class="fa fa-#{cartaNoAdeudoEstudiante.rol.classRMateriales}"/> #{carta.serviciosMateriales.statusRev}</span></h4></p:column>
                                                            <p:column colspan="3">#{carta.serviciosMateriales.aduedoServiciosMateriales.adeudo.adeudo}</p:column>
                                                            <p:column colspan="7">#{carta.serviciosMateriales.aduedoServiciosMateriales.observaciones}</p:column>
                                                            <p:column colspan="1" style="width: 20px">#{carta.serviciosMateriales.correo}</p:column>
                                                        </p:row>
                                                        <!--Departamento de Servicios Escolares  -->
                                                        <p:row style="height: 100px">
                                                            <p:column colspan="3" styleClass="actividad" style="font-weight: bold; text-align: center;"><h4>Departamento de Servicios Escolares</h4></p:column>
                                                            <p:column colspan="1" style="text-align: center;width: 20px"> <h4><span class="label label-#{cartaNoAdeudoEstudiante.rol.labelEscolares}"><i class="fa fa-#{cartaNoAdeudoEstudiante.rol.classEscolares}"/> #{carta.servciosEscolares.statusRev}</span></h4></p:column>
                                                            <p:column colspan="3">#{carta.servciosEscolares.aduedoServiciosEscolares.adeudo.adeudo}</p:column>
                                                            <p:column colspan="7">#{carta.servciosEscolares.aduedoServiciosEscolares.observaciones}</p:column>
                                                            <p:column colspan="1" style="width: 20px">#{carta.servciosEscolares.correo}</p:column>
                                                        </p:row>
                                                        <!--Coordinación de Titulación-->
                                                        <p:row style="height: 100px">
                                                            <p:column colspan="3" styleClass="actividad" style="font-weight: bold; text-align: center;"><h4>Coordinación de Titulación</h4></p:column>
                                                            <p:column colspan="1" style="text-align: center;width: 20px"> <h4><span class="label label-#{cartaNoAdeudoEstudiante.rol.labelTitulacion}"><i class="fa fa-#{cartaNoAdeudoEstudiante.rol.classTitulacion}"/> #{carta.titulacion.statusRev}</span></h4></p:column>
                                                            <p:column colspan="3">#{carta.titulacion.aduedoTitulacion.adeudo.adeudo}</p:column>
                                                            <p:column colspan="7">#{carta.titulacion.aduedoTitulacion.observaciones}</p:column>
                                                            <p:column colspan="1" style="width: 20px">#{carta.titulacion.correo}</p:column>
                                                        </p:row>
                                                        <!--Dirección de Finanzas-->
                                                        <p:row style="height: 100px">
                                                            <p:column colspan="3" styleClass="actividad" style="font-weight: bold; text-align: center;"><h4>Dirección de Finanzas</h4></p:column>
                                                            <p:column colspan="1" style="text-align: center;width: 20px"> <h4><span class="label label-#{cartaNoAdeudoEstudiante.rol.labelFinanzas}"><i class="fa fa-#{cartaNoAdeudoEstudiante.rol.classFinanzas}"/> #{carta.finanzas.statusRev}</span></h4></p:column>
                                                            <p:column colspan="3">#{carta.finanzas.aduedoFinanzas.adeudo.adeudo}</p:column>
                                                            <p:column colspan="7">#{carta.finanzas.aduedoFinanzas.observaciones}</p:column>
                                                            <p:column colspan="1" style="width: 20px">#{carta.finanzas.correo}</p:column>
                                                        </p:row>
                                                    </p:panelGrid>

                                                </p:panel>
                                            </center>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </h:form>

                    <!-- Zona de cuadros de diálogo -->

                    <p:dialog id="modalAyuda"
                              widgetVar="modalAyuda" width="700" height="auto" closeOnEscape="true" visible="#{false}" showEffect="fade" hideEffect="fade"
                              modal="true" draggable="true" header="Ayuda" styleClass="panel panel-primary" responsive="true" resizable="false" closable="false" maximizable="true">
                        <div class="box box-primary">
                            <div class="box-header"><i class="ion ion-clipboard"></i><h3 class="box-title">Elementos necesarios de la Carta de No Adeudo</h3></div>
                            <div class="box-body">
                                <ul class="todo-list">
                                    <c:forEach items="#{cartaNoAdeudoDireccionCarrera.rol.instrucciones}" var="instruccion">
                                        <li><span class="text" style="text-align: justify;"><i class="fa fa-ellipsis-v"></i><i class="fa fa-ellipsis-v"></i> #{instruccion}</span></li>
                                    </c:forEach>
                                </ul>
                            </div>
                            <div class="box-footer clearfix no-border"><button type="button" class="btn btn-primary pull-right" onclick="PF('modalAyuda').hide();"><i class="fa fa-times"></i> Cerrar</button></div>
                        </div>
                    </p:dialog>
                </c:if>
                <c:if test="#{!cartaNoAdeudoEstudiante.tieneAcceso}">
                    <p:panel id="box-colors-panel" header="Acceso no autorizado" styleClass="box-fatal box-solid">
                        <h:panelGrid columns="2" cellpadding="10">
                            <h:outputText value="#{cartaNoAdeudoEstudiante.rol.mensajeV}"/>
                        </h:panelGrid>
                        <f:facet name="footer"></f:facet>
                    </p:panel>
                </c:if>
            </div>
            <script>
                //collapseSidebar(); activar para colapsar barra lateral
            </script>
        </c:if>
    </ui:define>
</ui:composition>
