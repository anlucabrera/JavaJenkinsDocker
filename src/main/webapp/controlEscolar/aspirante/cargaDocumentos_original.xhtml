<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:adm="http://github.com/adminfaces"
                template="/WEB-INF/templates/template.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui">

    <ui:define name="head-end">
        <ui:param name="renderBreadCrumb" value="false"/>
        
        <link rel="stylesheet" type="text/css" href="../../resources/css/estilosGenerales.css" media="screen" />
        <!-- Fin estilos par proceso electoral -->
    </ui:define>

    <ui:define name="title">
        Carga documentos admisión e inscripción
    </ui:define>
    
    <ui:define name="description">
        
    </ui:define>

    <ui:define name="body">
        <p:panel id="errort" header="Error de Tamaño" class="show-xs show-sm hidden-md hidden-lg hidden-xl">
            <h1>
                Esta página está disponible solo para pantallas superiores a 1024px.
            </h1>
        </p:panel>
        <p:panel id="informacion" header="Carga documentos admisión e inscripción" class="hidden-xs hidden-sm" styleClass="box box-primary">
            <section class="content">
                <h:form>
                    <div class="row" ondragstart="return false" onselectstart="return false" oncontextmenu="return false">
                        <div class="col-md-12">
                            <div class="box box-widget widget-user-2">
                                <div class="row">
                                    <div class="col-sm-12 border-right">
                                        <center>
                                        <div class="description-block">
                                            <div class="row">
                                                <div class="form-group">
                                                    <div class="col-sm-4 col-md-4 col-lg-6">
                                                        <p:outputLabel for="curp" style="font-size: large;text-align: right;" value="CURP" />
                                                        <p:inputText id="curp" class="form-control" value="#{cargaDocumentosAspirante.rol.curp}" required="true" requiredMessage="Es necesario que ingrese su CURP"/>
                                                        <p:message for="curp"><p:autoUpdate/></p:message>
                                                    </div>
                                                    <div class="col-sm-4 col-md-4 col-lg-6">
                                                        <p:outputLabel for="folio" style="font-size: large;text-align: right;" value="Folio de Admisión" />
                                                        <p:inputText id="folio" class="form-control" value="#{cargaDocumentosAspirante.rol.folioAdmision}" required="true" requiredMessage="Es necesario que ingrese su folio de admisión"/>
                                                        <p:message for="folio"><p:autoUpdate/></p:message>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr/>
                                            <hr/>
                                            <div class="row">
                                                <div class="form-group">
                                                    <div class="col-sm-4 col-md-4 col-lg-4"/>
                                                    <div class="col-sm-4 col-md-4 col-lg-4">
                                                        <p:commandButton id="btnBuscaFichaA" value="Validar datos" icon="fa fa-search"
                                                                         class="btn-primary btn-block col-md-3" update="@form" process="@form" actionListener="#{cargaDocumentosAspirante.validarCurpFolio()}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            </center>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <c:if test="#{cargaDocumentosAspirante.rol.validacionCurpFolio == true}">
                        <p:panel id="aviso"  widgetVar="panel-solid" styleClass="box-danger box-info">
                            <div class="box-header">
                                <div class="well well-md">
                                        <p:remoteCommand name="actualizarListaDocs" update="@form:tblDocsExp" />
                                        <p:dataTable id="tblDocsExp" emptyMessage="Sin datos en el periodo seleccionado." value="#{cargaDocumentosAspirante.rol.listaDocumentoAspirante}" var="docsExp"
                                                     resizeMode="expand"
                                                     tableStyleClass="table table-bordered table-hover table-condensed table-responsive">
                                            <p:columnGroup type="header">
                                                <p:row>
                                                    <p:column headerText="Opciones" width="120"/>
                                                    <p:column headerText="Documento" width="200" />
                                                    <p:column headerText="Obligatorio" width="150" />
                                                    <p:column headerText="Fecha de Carga" width="100" />
                                                    <p:column headerText="Observaciones" width="200" />
                                                    <p:column headerText="Validado" width="80" />
                                                    <p:column headerText="Fecha de Validación" width="100" />
                                                    <p:column headerText="Cargar" width="150" />
                                                </p:row>
                                            </p:columnGroup>
                                            <p:column style="text-align: center;">
                                                <div class="btn-group">
<!--                                                    <p:commandButton class="btn btn-info btn-sm" icon="fa fa-trash" actionListener="# {controladorArchTit.eliminarDocumento(docsExp)}" onsuccess="actualizarListaDocs();" title="Eliminar documento." disabled="# {!empty status}">
                                                        <p:confirm header="Eliminar documento" message="¿Está seguro de eliminar el documento # {caster.rutaToArchivoNombre(docsExp.ruta)}?" icon="ui-icon-alert" />
                                                    </p:commandButton>
                                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
                                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
                                                    </p:confirmDialog> 
                                                    <p:commandLink class="btn btn-info btn-sm" ajax="false" action="# {controladorArchTit.descargarDocumento(docsExp)}" target="_blank" title="Descargar documento."><i class="fa fa-download" /></p:commandLink>-->
                                                </div>
                                            </p:column>
                                            <p:column style="text-align: justify;"><h:outputText value="#{docsExp.documentoProceso.documento.descripcion}" /></p:column>
                                            <p:column style="text-align: justify;"><h:outputText value="#{docsExp.documentoProceso.obligatorio}" /></p:column>
                                            <p:column style="text-align: center;"><h:outputText value="#{docsExp.documentoAspiranteProceso.fechaCarga}"><f:convertDateTime type="date" pattern="dd-MM-yyyy"/></h:outputText></p:column>                                                               
                                            <p:column style="text-align: justify;"><h:outputText value="#{docsExp.documentoAspiranteProceso.observaciones}" /></p:column>
                                            <p:column style="text-align: justify;"><h:outputText value="#{docsExp.documentoAspiranteProceso.validado}" /></p:column>
                                            <p:column style="text-align: center;"><h:outputText value="#{docsExp.documentoAspiranteProceso.fechaValidacion}"><f:convertDateTime type="date" pattern="dd-MM-yyyy"/></h:outputText></p:column>
                                            <p:column style="text-align: center;">
                                                <o:inputFile id="file" value="#{cargaDocumentosAspirante.file2}" accept="image/png,image/jpg,image/jpeg,application/pdf" acceptMessage="Sólo se permiten imágenes JPG/PNG o documentos PDF." maxsize="#{caster.docsTitulacionTamanioLimite}" maxsizeMessage="El tamaño máximo permitido son #{caster.bytesToMegabytes(caster.docsTitulacionTamanioLimite)}." />
                                                <br/>
                                                <h:message id="messageForFile" for="file" />
                                                <br/>
                                                <h:commandButton value="Subir archivo" class="btn-primary btn-info" action="#{cargaDocumentosAspirante.subirDocumento(docsExp)}" />
                                            </p:column>
                                        </p:dataTable>
                                    <p style="text-align: justify; font-size: larger;">
                                        TRUE
                                        ATENTAMENTE
                                        <br/>
                                        Departamento de Servicios Escolares.
                                    </p>
                                </div>
                            </div>
                        </p:panel>
                    </c:if>
                    <c:if test="#{cargaDocumentosAspirante.rol.validacionCurpFolio == false}">
                        <p:panel id="aviso"  widgetVar="panel-solid" styleClass="box-danger box-info">
                            <div class="box-header">
                                <div class="well well-md">
                                    <p style="text-align: justify; font-size: larger;">
                                        Estimado(a) Aspirante:
                                        <br/>
                                        <br/>
                                        Se le informa que los datos no coinciden, favor de verificar que este ingresando la curp y el folio correctamente.<br/>

                                    </p>
                                    <br />
                                    ATENTAMENTE
                                    <br/>
                                    Departamento de Servicios Escolares.
                                </div>
                            </div>
                        </p:panel>
                    </c:if>
                </h:form>
            </section>
        </p:panel>
    </ui:define>
</ui:composition>
