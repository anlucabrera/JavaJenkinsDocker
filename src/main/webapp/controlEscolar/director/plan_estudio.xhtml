<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:adm="http://github.com/adminfaces"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                template="#{layoutMB.template}"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui">

    <ui:define name="head-end">       
        <h:outputStylesheet library="css" name="tablaDatos.css"/>
        <!-- Inicio estilos par proceso electoral -->
        <c:if test="#{utilidadesAcceso.procesoElectoralActivo}">
            <link rel="stylesheet" type="text/css" href="../../resources/css/procesoElectoral.css" media="screen"/>
        </c:if>
        <link rel="stylesheet" type="text/css" href="../../resources/css/estilosGeneralesPrint.css" media="screen" />
        <!-- Fin estilos par proceso electoral -->
        <style type="text/css">
            .ui-selectonemenu-list-item {
                border: 0 none;
                margin: 1px 0;
                padding: 3px 5px;
                text-align: left;
                white-space: pre-line;
                max-width: calc(90vw);
            }
        </style>
    </ui:define>

    <ui:define name="title">
        Administración de Planes de Estudio
    </ui:define>

    <ui:define name="description">

    </ui:define>

    <ui:define name="head-end">
        <h:outputStylesheet library="css" name="tablaDatos.css"/>
        <h:outputScript library="js" name="dialogs.js"/>
    </ui:define>

    <ui:define name="body">
        <c:if test="#{administracionPlanEstudioDirector.cargado}">
            <adm:breadcrumb title="Administración de Planes de Estudio"/>
            <adm:sidebar collapsed="true"/>
            <div class="contenedor">
                <c:if test="#{administracionPlanEstudioDirector.tieneAcceso}">
                    <!-- zona de importación de enums -->
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <div class="box box-solid">
                                <p:tabView activeIndex="#{administracionPlanEstudioDirector.activaPestania}">
                                    <p:tab title="Planes de Estudio">
                                        <h:form id="planEstudioFrm">
                                            <p:growl><p:autoUpdate/></p:growl>
                                            <div id="main-buttons" class="hidden-sm hidden-xs">
                                                <p:toolbar id="tb">
                                                    <f:facet name="left">

                                                        <p:spacer width="5" />

                                                    </f:facet>
                                                    <f:facet name="right">
                                                        <p:commandButton title="Guardar Plan" icon="fa fa-save" styleClass="btn-success" update="@this @form" actionListener="#{administracionPlanEstudioDirector.guardarPlanEstudio()}"/>
                                                    </f:facet>
                                                </p:toolbar>
                                            </div>
                                            <div class="ui-g ui-fluid" style="margin-top: 20px;">
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="programa" value="#{administracionPlanEstudioDirector.rol.planEstudio1.programa}" converter="entityConverter">
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.programas}" var="programae" itemValue="#{programae}" itemLabel="#{programae.nombre}" />
                                                            <p:ajax update="@this" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="programa" value="Programa Educativo"/>
                                                        <p:message for="programa"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="estatus" value="#{administracionPlanEstudioDirector.rol.planEstudio1.planEstudio.estatus}">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItem itemValue="1" itemLabel="Activo"/>
                                                            <f:selectItem itemValue="0" itemLabel="Inactivo"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="estatus" value="Estatus del Plan"/>
                                                        <p:message for="estatus"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputText id="version" placeholder="Versión" required="true" value="#{administracionPlanEstudioDirector.rol.planEstudio1.planEstudio.anio}"/>
                                                        <p:outputLabel for="version" value="Versión del Plan"/>
                                                        <p:message for="version"/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputTextarea id="descripcion" placeholder="Descripción del Plan de Estudio" value="#{administracionPlanEstudioDirector.rol.planEstudio1.planEstudio.descripcion}" />
                                                        <p:outputLabel for="descripcion" value="Descripción"/>
                                                        <p:message for="descripcion"/>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="ui-g-12 ui-sm-12">
                                                <div class="ui-material">

                                                    <p:dataTable var="planE" value="#{administracionPlanEstudioDirector.rol.planesEstudio}">
                                                        <f:facet name="header">
                                                            Planes de Estudio
                                                        </f:facet>

                                                        <p:headerRow>
                                                            <p:column colspan="2">
                                                                <h:outputText value="#{planE.idAreaConocimiento.nombre}" style="text-align: left"/>
                                                            </p:column>
                                                        </p:headerRow>

                                                        <p:column headerText="Nombre" sortBy="#{planE.nombre}" filterBy="#{planE.nombre}" filterMatchMode="contains" >
                                                            <h:outputText value="#{planE.descripcion}" />
                                                        </p:column>
                                                        <p:column headerText="Estatus">
                                                            <h:outputText value="#{planE.estatus}" />
                                                        </p:column>
                                                        <p:column headerText="Año">
                                                            <h:outputText value="#{planE.anio}" />
                                                        </p:column>
                                                    </p:dataTable>

                                                </div>
                                            </div>
                                        </h:form>
                                    </p:tab>
                                    <p:tab title="Materias">
                                        <h:form id="planEstudioMateriaFrm">
                                            <div id="main-buttons-asignatura" class="hidden-sm hidden-xs">
                                                <p:toolbar id="tb-asignatura">
                                                    <f:facet name="left">

                                                        <p:spacer width="5" />

                                                    </f:facet>
                                                    <f:facet name="right">
                                                        <p:commandButton title="Guardar Materias" icon="fa fa-save" styleClass="btn-success" update="@form" actionListener="#{administracionPlanEstudioDirector.guardarMateria()}"/>
                                                    </f:facet>
                                                </p:toolbar>
                                            </div>
                                            <div class="ui-g ui-fluid" style="margin-top: 20px;">                                            
                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="planEstudio" value="#{administracionPlanEstudioDirector.rol.materiaPlanEstudio1.planEstudio}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.planesEstudio}" var="planEstudio" itemValue="#{planEstudio}" itemLabel="#{planEstudio.descripcion}" />
                                                            <p:ajax listener="#{administracionPlanEstudioDirector.materiasPorPlanEstudioConsultaUnica()}" update="planEstudioMateriaFrm" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="planEstudio" value="Plan de estudios"/>
                                                        <p:message for="planEstudio"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputText id="nombreMateria" placeholder="Nombre de la asignatura" value="#{administracionPlanEstudioDirector.rol.materiaRegistro1.materia.nombre}"/>
                                                        <p:outputLabel for="nombreMateria" value="Nombre de la asignatura"/>
                                                        <p:message for="nombreMateria"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="estatusMateria" value="#{administracionPlanEstudioDirector.rol.materiaRegistro1.materia.estatus}">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItem itemValue="1" itemLabel="Activo"/>
                                                            <f:selectItem itemValue="0" itemLabel="Inactivo"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="estatusMateria" value="Estatus de la asignatura"/>
                                                        <p:message for="estatusMateria"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="areaConocimiento" value="#{administracionPlanEstudioDirector.rol.materiaRegistro1.areaConocimiento}" converter="entityConverter">
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.conocimientos}" var="cononcimientoe" itemValue="#{cononcimientoe}" itemLabel="#{cononcimientoe.nombre}" />
                                                            <p:ajax update="@this" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="areaConocimiento" value="Área de conocimiento"/>
                                                        <p:message for="areaConocimiento"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputText id="calveMateria" placeholder="Calve de la materia" value="#{administracionPlanEstudioDirector.rol.materiaPlanEstudio1.planEstudioMateria.claveMateria}"/>
                                                        <p:outputLabel for="calveMateria" value="Clave"/>
                                                        <p:message for="calveMateria"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputText id="grado" placeholder="Grado" value="#{administracionPlanEstudioDirector.rol.materiaPlanEstudio1.planEstudioMateria.grado}"/>
                                                        <p:outputLabel for="grado" value="Grado"/>
                                                        <p:message for="grado"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">

                                                        <p:dataTable id="unidadesResultados" var="um" value="#{administracionPlanEstudioDirector.rol.planEstudioMaterias}" sortBy="#{um.grado}"
                                                                     editable="true" editMode="row">
                                                            <f:facet name="header">
                                                                #{administracionPlanEstudioDirector.rol.materiaPlanEstudio1.planEstudio.descripcion}
                                                            </f:facet>
                                                            <p:columnGroup type="header">
                                                                <p:row class="success">
                                                                    <p:column rowspan="2" headerText="" style="width: 32px;"/> 
                                                                    <p:column rowspan="2" headerText="Cuatrimestre" style="width: 100px;"/> 
                                                                    <p:column rowspan="2" headerText="Área Conocimiento" style="width: 200px;"/> 
                                                                    <p:column rowspan="2" headerText="Materia" style="width: 300px;"/>
                                                                    <p:column rowspan="2" headerText="Clave" style="width: 300px;"/>
                                                                    <p:column rowspan="2" headerText="" style="width: 32px;"/> 
                                                                </p:row>
                                                            </p:columnGroup>

                                                            <p:ajax event="rowEdit" listener="#{administracionPlanEstudioDirector.onRowEditPlanEstudioMateria}" update="unidadesResultados" />
                                                            <p:ajax event="rowEditCancel" listener="#{administracionPlanEstudioDirector.onRowCancel}" update="unidadesResultados" />

                                                            <p:column>
                                                                <p:commandButton actionListener="#{administracionPlanEstudioDirector.eliminarPlanEstudioMateria(um)}" process="@this" update="unidadesResultados" icon="fa fa-trash" 
                                                                                 styleClass="btn-primary" title="Eliminar Plan estudio Materia">
                                                                    <p:confirm header="Confirmación" message="¿Confirma la eliminación de la Materia #{um.idMateria.nombre} del plan de estudios #{administracionPlanEstudioDirector.rol.materiaPlanEstudio1.planEstudio.descripcion}?" icon="ui-icon-alert" />
                                                                </p:commandButton>
                                                            </p:column>
                                                            <p:column groupRow="true">
                                                                <h:outputText value="#{um.grado}" />
                                                            </p:column>
                                                            <p:column groupRow="true">
                                                                <h:outputText value="#{um.idMateria.idAreaConocimiento.nombre}" />
                                                            </p:column>
                                                            <p:column>
                                                                <p:cellEditor>
                                                                    <f:facet name="output"><h:outputText value="#{um.idMateria.nombre}" /></f:facet>
                                                                    <f:facet name="input"> <p:inputText value="#{um.idMateria.nombre}" /> </f:facet>
                                                                </p:cellEditor>                                                                                                                    
                                                            </p:column>
                                                            <p:column>
                                                                <p:cellEditor>
                                                                    <f:facet name="output"><h:outputText value="#{um.claveMateria}" /></f:facet>
                                                                    <f:facet name="input"> <p:inputText value="#{um.claveMateria}" /> </f:facet>
                                                                </p:cellEditor>   
                                                            </p:column>
                                                            <p:column style="width:32px">
                                                                <p:rowEditor rendered="#{um.cargaAcademicaList.size() eq 0?true:false}"/>
                                                            </p:column>
                                                        </p:dataTable>
                                                        <br/>
                                                    </div>
                                                </div>
                                            </div>
                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                                            </p:confirmDialog>   
                                        </h:form>
                                    </p:tab>
                                    <p:tab title="Unidades">
                                        <h:form id="unidadesFrm">
                                            <div id="main-buttons-asignatura" class="hidden-sm hidden-xs">
                                                <p:toolbar id="tb-asignatura">
                                                    <f:facet name="left">

                                                        <p:spacer width="5" />

                                                    </f:facet>
                                                    <f:facet name="right">
                                                        <p:commandButton title="Guardar Materias" icon="fa fa-save" styleClass="btn-success" update="@form" actionListener="#{administracionPlanEstudioDirector.guardarUnidad()}"/>
                                                    </f:facet>
                                                </p:toolbar>
                                            </div>

                                            <div class="ui-g ui-fluid" style="margin-top: 20px;">
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="planEstudioC" value="#{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetencias1.planEstudio}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.planesEstudio}" var="planEstudio" itemValue="#{planEstudio}" itemLabel="#{planEstudio.descripcion}" />
                                                            <p:ajax listener="#{administracionPlanEstudioDirector.materiasPorPlanEstudioConsultaUnica()}" update="materiaR" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="planEstudioC" value="Plan de estudios"/>
                                                        <p:message for="planEstudioC"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="materiaR" value="#{administracionPlanEstudioDirector.rol.materiaUnidades1.materia}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.materias}" var="materiasR" itemValue="#{materiasR}" itemLabel="#{materiasR.nombre}" />
                                                            <p:ajax listener="#{administracionPlanEstudioDirector.unidadesPorMateriaConsulta()}" update="unidadesFrm:unidadesResultados" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="materiaR" value="Materia"/>
                                                        <p:message for="materiaR"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputText id="nombreUnidad" placeholder="Nombre de la unidad" value="#{administracionPlanEstudioDirector.rol.materiaUnidades1.unidadMateria.nombre}"/>
                                                        <p:outputLabel for="nombreUnidad" value="Nombre"/>
                                                        <p:message for="nombreUnidad"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputText id="numeroU" placeholder="Número de unidad" value="#{administracionPlanEstudioDirector.rol.materiaUnidades1.unidadMateria.noUnidad}"/>
                                                        <p:outputLabel for="numeroU" value="Número"/>
                                                        <p:message for="numeroU"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputText id="horasT" placeholder="Horas teóricas" value="#{administracionPlanEstudioDirector.rol.materiaUnidades1.unidadMateria.horasTeoricas}"/>
                                                        <p:outputLabel for="horasT" value="Horas Teóricas"/>
                                                        <p:message for="horasT"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputText id="horasP" placeholder="Horas Prácticas" value="#{administracionPlanEstudioDirector.rol.materiaUnidades1.unidadMateria.horasPracticas}"/>
                                                        <p:outputLabel for="horasP" value="Horas Prácticas"/>
                                                        <p:message for="horasP"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputTextarea id="objetivoU" placeholder="Objetivo" value="#{administracionPlanEstudioDirector.rol.materiaUnidades1.unidadMateria.objetivo}" />
                                                        <p:outputLabel for="objetivoU" value="Objetivo"/>
                                                        <p:message for="objetivoU"/>
                                                    </div>
                                                </div>



                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:dataTable id="unidadesResultados" var="um" value="#{administracionPlanEstudioDirector.rol.unidadesMateria}" editable="true" editMode="row">
                                                            <f:facet name="header">
                                                                Unidades
                                                            </f:facet>
                                                            <p:columnGroup type="header">
                                                                <p:row class="success">
                                                                    <p:column rowspan="2" headerText="" style="width: 50px;"/> 
                                                                    <p:column rowspan="2" headerText="Nombre" style="width: 20%;"/> 
                                                                    <p:column rowspan="2" headerText="Objetivo" style="width: 40%;"/>
                                                                    <p:column rowspan="2" headerText="Número unidad" style="width: 10%;"/>
                                                                    <p:column colspan="3" headerText="Horas" style="width: 20%;"/>
                                                                    <p:column rowspan="2" headerText="Integradora" style="width: 10%;"/>
                                                                    <p:column rowspan="2" headerText="" style="width: 32px;"/> 
                                                                </p:row>
                                                                <p:row class="success">
                                                                    <p:column headerText="Teóricas"/>
                                                                    <p:column headerText="Practicas"/>
                                                                    <p:column headerText="Total"/>
                                                                </p:row>
                                                            </p:columnGroup>

                                                            <p:ajax event="rowEdit" listener="#{administracionPlanEstudioDirector.onRowEditUnidad}" oncomplete="unidadesResultados" />
                                                            <p:ajax event="rowEditCancel" listener="#{administracionPlanEstudioDirector.onRowCancel}" oncomplete="unidadesResultados" />

                                                            <p:column>
                                                                <p:commandButton actionListener="#{administracionPlanEstudioDirector.eliminarUnidadMateria(um)}" update="unidadesResultados" process="@this" icon="fa fa-trash" 
                                                                                 styleClass="btn-primary" title="Eliminar Unidades">
                                                                    <p:confirm header="Confirmación" message="¿Confirma la eliminación de la Unidad #{um.nombre} de la materia #{administracionPlanEstudioDirector.rol.materiaUnidades1.materia.nombre}?" icon="ui-icon-alert" />
                                                                </p:commandButton>
                                                            </p:column>
                                                            <p:column>
                                                                <p:cellEditor>
                                                                    <f:facet name="output"><h:outputText value="#{um.nombre}" /></f:facet>
                                                                    <f:facet name="input">
                                                                        <p:inputText value="#{um.nombre}" />
                                                                    </f:facet>
                                                                </p:cellEditor>
                                                            </p:column>
                                                            <p:column>
                                                                <p:cellEditor>
                                                                    <f:facet name="output"><h:outputText value="#{um.objetivo}" /></f:facet>
                                                                    <f:facet name="input">
                                                                        <p:inputTextarea value="#{um.objetivo}" />
                                                                    </f:facet>
                                                                </p:cellEditor>
                                                            </p:column>
                                                            <p:column>
                                                                <p:cellEditor>
                                                                    <f:facet name="output"><h:outputText value="#{um.noUnidad}" /></f:facet>
                                                                    <f:facet name="input">
                                                                        <p:inputText value="#{um.noUnidad}" />
                                                                    </f:facet>
                                                                </p:cellEditor>
                                                            </p:column>
                                                            <p:column>
                                                                <p:cellEditor>
                                                                    <f:facet name="output"><h:outputText value="#{um.horasTeoricas}" /></f:facet>
                                                                    <f:facet name="input">
                                                                        <p:inputText value="#{um.horasTeoricas}" />
                                                                    </f:facet>
                                                                </p:cellEditor>
                                                            </p:column> 
                                                            <p:column>
                                                                <p:cellEditor>
                                                                    <f:facet name="output"><h:outputText value="#{um.horasPracticas}" /></f:facet>
                                                                    <f:facet name="input">
                                                                        <p:inputText value="#{um.horasPracticas}" />
                                                                    </f:facet>
                                                                </p:cellEditor>
                                                            </p:column>
                                                            <p:column>
                                                                <h:outputText value="#{(um.horasPracticas + um.horasTeoricas)}" />
                                                            </p:column>
                                                            <p:column>
                                                                <h:outputText value="#{um.integradora}" />
                                                            </p:column>
                                                            <p:column style="width:32px">
                                                                <p:rowEditor />
                                                            </p:column>
                                                        </p:dataTable> 
                                                    </div>
                                                </div>
                                            </div>
                                            <p:confirmDialog global="false" showEffect="fade" hideEffect="fade">
                                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                                            </p:confirmDialog>  
                                        </h:form>
                                    </p:tab>
                                    <p:tab title="Competencias">
                                        <h:form id="competenciasFrm">
                                            <div id="main-buttons-asignatura" class="hidden-sm hidden-xs">
                                                <p:toolbar id="tb-asignatura">
                                                    <f:facet name="left">

                                                        <p:spacer width="5" />

                                                    </f:facet>
                                                    <f:facet name="right">
                                                        <p:commandButton title="Guardar Materias" icon="fa fa-save" styleClass="btn-success" update="@form" actionListener="#{administracionPlanEstudioDirector.guardarPlanEstudioMateriaCompetencia()}"/>
                                                    </f:facet>
                                                </p:toolbar>
                                            </div>
                                            <div class="ui-g ui-fluid" style="margin-top: 20px;">                                            
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="planEstudioC" value="#{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetencias1.planEstudio}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.planesEstudio}" var="planEstudio" itemValue="#{planEstudio}" itemLabel="#{planEstudio.descripcion}" />
                                                            <p:ajax listener="#{administracionPlanEstudioDirector.competenciasPorPlanEstudioMateriaConsulta()}" update="@form" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="planEstudioC" value="Plan de estudios"/>
                                                        <p:message for="planEstudioC"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="materiaRegistradaC" value="#{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetencias1.planEstudioMateria}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.planEstudioMaterias}" var="meteriasR" itemValue="#{meteriasR}" itemLabel="#{meteriasR.grado}-#{meteriasR.claveMateria}-#{meteriasR.idMateria.nombre}" />
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="materiaRegistradaC" value="Materia"/>
                                                        <p:message for="materiaRegistradaC"/>
                                                        <br/>
                                                    </div>
                                                </div>


                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="competenciasR" value="#{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetencias1.competencia}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.competencias}" var="competenciaR" itemValue="#{competenciaR}" itemLabel="#{competenciaR.nombre}" />
                                                            <p:ajax listener="#{administracionPlanEstudioDirector.comprobarRegistroDeCompetencias()}" update="regstroC" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="competenciasR" value="Competencia"/>
                                                        <p:message for="competenciasR"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <p:outputPanel id="regstroC" class="ui-g-12 ui-sm-12">
                                                    <p:autoUpdate/>
                                                    <c:if test="#{administracionPlanEstudioDirector.rol.newCompetencia}">
                                                        <p:autoUpdate/>
                                                        <div class="ui-g-6 ui-sm-12">
                                                            <div class="ui-material">
                                                                <p:inputTextarea id="competenciaNombre" placeholder="Nombre" value="#{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetencias1.competenciaNewR.nombre}"/>
                                                                <p:outputLabel for="competenciaNombre" value="Nombre"/>
                                                                <p:message for="competenciaNombre"/>
                                                                <br/>
                                                            </div>
                                                        </div>
                                                        <div class="ui-g-6 ui-sm-12">
                                                            <div class="ui-material">
                                                                <p:selectOneMenu id="tipoCompetencia" value="#{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetencias1.competenciaNewR.tipo}">
                                                                    <f:selectItem itemValue="Específicas" itemLabel="Específicas"/>
                                                                    <f:selectItem itemValue="Genéricas" itemLabel="Genéricas"/>
                                                                </p:selectOneMenu>
                                                                <p:outputLabel for="tipoCompetencia" value="Tipo"/>
                                                                <p:message for="tipoCompetencia"/>
                                                                <br/>
                                                            </div>
                                                        </div>
                                                    </c:if>                                                
                                                </p:outputPanel>

                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">

                                                        <p:dataTable id="unidadesResultados" var="com" value="#{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetenciasesList}" sortBy="#{com.competencia.idCompetencia}"
                                                                     editable="true" editMode="row">
                                                            <f:facet name="header">
                                                                #{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetencias1.planEstudio.descripcion}
                                                                <br/>
                                                                #{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetencias1.planEstudioMateria.idMateria.nombre}
                                                            </f:facet>
                                                            <p:columnGroup type="header">
                                                                <p:row class="success">
                                                                    <p:column rowspan="2" headerText="Nombre" style="width: 60%;"/> 
                                                                    <p:column rowspan="2" headerText="Tipo" style="width: 10%;"/>
                                                                    <p:column rowspan="2" headerText="Materias" style="width: 30%;"/>
                                                                    <p:column rowspan="2" headerText="" style="width: 32px;"/> 
                                                                </p:row>
                                                            </p:columnGroup>

                                                            <p:ajax event="rowEdit" listener="#{administracionPlanEstudioDirector.onRowEditPlanEstudioMateriaCompetencia}" update="unidadesResultados" />
                                                            <p:ajax event="rowEditCancel" listener="#{administracionPlanEstudioDirector.onRowCancel}" update="unidadesResultados" />

                                                            <p:column groupRow="true">
                                                                <p:cellEditor>
                                                                    <f:facet name="output"><h:outputText value="#{com.competencia.nombre}" /></f:facet>
                                                                    <f:facet name="input"><p:inputTextarea value="#{com.competencia.nombre}" /></f:facet>
                                                                </p:cellEditor>                                                            
                                                            </p:column>
                                                            <p:column>
                                                                <h:outputText value="#{com.competencia.tipo}" />
                                                            </p:column>
                                                            <p:column>
                                                                <h:outputText value="#{com.planEstudioMateria.idMateria.nombre}" />
                                                            </p:column>
                                                            <p:column>
                                                                <p:rowEditor />
                                                            </p:column>
                                                        </p:dataTable>
                                                        <br/>
                                                    </div>
                                                </div>
                                            </div>
                                        </h:form>
                                    </p:tab>
                                    <p:tab title="Alineación Educativa">
                                        <h:form id="alineacionFrm">
                                            <div id="main-buttons-asignatura" class="hidden-sm hidden-xs">
                                                <p:toolbar id="tb">
                                                    <f:facet name="left">
                                                        <!--p:outputLabel value="Periodo activo para registro: # {caster.clavePeriodoToString(registroEvidInstEvalMateriasDireccion.rol.periodoActivo.periodo)}" /-->
                                                        <p:spacer width="5" />
                                                    </f:facet>
                                                    <f:facet name="right">
                                                        <c:if test="#{controladorArchivoRegistroEvidInst.etapa eq etapa.CARGAR}">
                                                            <span class="ui-separator"><span class="ui-icon ui-icon-grip-dotted-vertical" /></span>
                                                            <p:commandLink class="btn btn-primary btn-sm" ajax="false" action="registroEvidInstEvalMateria?faces-redirect=true" title="Consultar registros."><i class="fa fa-list"></i></p:commandLink>
                                                        </c:if>


                                                        Catálogos Generales:
                                                        <span class="ui-separator"><span class="ui-icon ui-icon-grip-dotted-vertical" /></span>
                                                        <p:commandLink class="btn btn-info" ajax="false" target="_blank" action="#{administracionPlanEstudioDirector.descargarPlantillaCatalogos()}" title="Descargar Plantilla Para Catalogos"><i class="fa fa-download" /></p:commandLink>
                                                        <span class="ui-separator"/>
                                                        <p:commandButton title="Cargar Excel" icon="fa fa-upload" onclick="PF('modalCargaArchivo').show()" class="btn btn-primary btn-sm"/>
                                                        <span class="ui-separator"/>
                                                        <p:commandButton title="Guardar Alineacion" icon="fa fa-save" styleClass="btn-success" update="@form" actionListener="#{administracionPlanEstudioDirector.guardarCatalogos()}" rendered="#{administracionPlanEstudioDirector.rol.listalineacionAcedemica.size() ne 0}"/>
                                                        <span class="ui-separator"><span class="ui-icon ui-icon-grip-dotted-vertical" /></span>

                                                        Alineaciones:
                                                        <span class="ui-separator"><span class="ui-icon ui-icon-grip-dotted-vertical" /></span>
                                                        <p:commandLink class="btn btn-info" ajax="false" target="_blank" action="#{administracionPlanEstudioDirector.descargarPlantillaCatalogosAlineacion()}" title="Descargar Plantilla Para Alineacion"><i class="fa fa-download" /></p:commandLink>
                                                        <span class="ui-separator"/>
                                                        <p:commandButton title="Cargar Excel" icon="fa fa-upload" onclick="PF('modalCargaArchivoAlineacion').show()" class="btn btn-primary btn-sm"/>
                                                        <span class="ui-separator"/>
                                                        <p:commandButton title="Guardar Alineacion" icon="fa fa-save" styleClass="btn-success" update="@form" actionListener="#{administracionPlanEstudioDirector.guardarAlineacionPlantilla()}" rendered="#{administracionPlanEstudioDirector.rol.listaAlineacionVistaP.size() ne 0}"/>
                                                        <span class="ui-separator"><span class="ui-icon ui-icon-grip-dotted-vertical" /></span>

                                                        Botones para formulario:
                                                        <span class="ui-separator"><span class="ui-icon ui-icon-grip-dotted-vertical" /></span>
                                                        <p:commandLink class="btn btn-info" rendered="# {true}" disabled="# {false}" onclick="PF('modalAyuda').show();" title="Presione el botón para obtener ayuda sobre la operación de ésta herramienta."><i class="fa fa-question"/></p:commandLink>
                                                        <span class="ui-separator"><span class="ui-icon ui-icon-grip-dotted-vertical" /></span>
                                                        <p:commandButton title="Guardar Alineacion" icon="fa fa-save" styleClass="btn-success" update="@form" actionListener="#{administracionPlanEstudioDirector.guardarAlineacion()}"/>
                                                    </f:facet>
                                                </p:toolbar>
                                            </div>
                                            <div class="ui-g ui-fluid" style="margin-top: 20px;">   
                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="planEstudioC" value="#{administracionPlanEstudioDirector.rol.alineacionAcedemica.planEstudio}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.planesEstudio}" var="planEstudio" itemValue="#{planEstudio}" itemLabel="#{planEstudio.descripcion}" />
                                                            <p:ajax listener="#{administracionPlanEstudioDirector.comprobarTipoRegistro()}" update="@form" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="planEstudioC" value="Plan de estudios"/>
                                                        <p:message for="planEstudioC"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:outputLabel for="materiaRegistradaC" value="Materia"/>
                                                        <p:selectManyCheckbox id="materiaRegistradaC" value="#{administracionPlanEstudioDirector.rol.planestudioMateriasSelect}" converter="entityConverter"
                                                                              layout="responsive" columns="3">
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.planEstudioMaterias}" var="meteriasR" itemValue="#{meteriasR}" itemLabel="#{meteriasR.grado} - #{meteriasR.claveMateria} #{meteriasR.idMateria.nombre}" />
                                                        </p:selectManyCheckbox>
                                                        <p:message for="materiaRegistradaC"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="tipoRegistro" value="#{administracionPlanEstudioDirector.rol.tipoReg}">
                                                            <f:selectItem itemValue="Ob" itemLabel="Objetivo educacional"/>
                                                            <f:selectItem itemValue="Ae" itemLabel="Atributo de Egreso"/>
                                                            <f:selectItem itemValue="In" itemLabel="Indicador" />
                                                            <f:selectItem itemValue="Cr" itemLabel="Criterio de Desempeño"/>
                                                            <p:ajax listener="#{administracionPlanEstudioDirector.comprobarTipoRegistro()}" update="regstroC tablasResultado" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="tipoRegistro" value="Tipo de Registro"/>
                                                        <p:message for="tipoRegistro"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <p:outputPanel id="regstroC" class="ui-g-12 ui-sm-12">
                                                    <p:autoUpdate/>
                                                    <div class="ui-g-12 ui-sm-12">
                                                        <div class="ui-material">
                                                            <p:selectOneMenu id="competenciasR" value="#{administracionPlanEstudioDirector.rol.alineacionAcedemica.ide}" autoWidth="false" panelStyle="max-width: calc(90vw) !important; white-space: break-spaces !important;">
                                                                <f:selectItem itemValue="#{null}" />
                                                                <f:selectItems value="#{administracionPlanEstudioDirector.rol.alineacionesDescripociones}" var="competenciaR" itemValue="#{competenciaR.ide}" itemLabel="#{competenciaR.clave} -- #{competenciaR.descripcion}"  />
                                                                <p:ajax listener="#{administracionPlanEstudioDirector.comprobarClaveDeRegistro()}" update="regstroC" process="@this"/>
                                                            </p:selectOneMenu>
                                                            <p:outputLabel for="competenciasR" value="Competencia"/>
                                                            <p:message for="competenciasR"/>
                                                            <br/>
                                                        </div>
                                                    </div>
                                                    <c:if test="#{administracionPlanEstudioDirector.rol.newCompetencia}">
                                                        <p:autoUpdate/>
                                                        <div class="ui-g-6 ui-sm-12">
                                                            <div class="ui-material">
                                                                <p:inputText id="claveReg" placeholder="Clave" value="#{administracionPlanEstudioDirector.rol.alineacionAcedemica.clave}"/>
                                                                <p:outputLabel for="claveReg" value="Clave"/>
                                                                <p:message for="claveReg"/>
                                                                <br/>
                                                            </div>
                                                        </div>
                                                        <div class="ui-g-6 ui-sm-12">
                                                            <div class="ui-material">
                                                                <p:inputTextarea id="descripcionTr" placeholder="Descripción" value="#{administracionPlanEstudioDirector.rol.alineacionAcedemica.descripcion}"/>
                                                                <p:outputLabel for="descripcionTr" value="Descripción"/>
                                                                <p:message for="descripcionTr"/>
                                                                <br/>
                                                            </div>
                                                        </div>
                                                    </c:if>
                                                    <c:if test="#{administracionPlanEstudioDirector.rol.newRegiistroOe}">
                                                        <p:autoUpdate/>
                                                        <div class="ui-g-6 ui-sm-12">
                                                            <div class="ui-material">
                                                                <p:selectOneMenu id="nivelAp" value="#{administracionPlanEstudioDirector.rol.alineacionAcedemica.nivelA}">
                                                                    <f:selectItem itemValue="Avanzado" itemLabel="Avanzado"/>
                                                                    <f:selectItem itemValue="Medio" itemLabel="Medio"/>
                                                                    <f:selectItem itemValue="Introductorio" itemLabel="Introductorio"/>
                                                                </p:selectOneMenu>
                                                                <p:outputLabel for="nivelAp" value="Nivel de Aportación"/>
                                                                <p:message for="nivelAp"/>
                                                                <br/>
                                                            </div>
                                                        </div>
                                                    </c:if>  
                                                    <c:if test="#{administracionPlanEstudioDirector.rol.newRegiistroIn}">
                                                        <p:autoUpdate/>
                                                        <div class="ui-g-6 ui-sm-12">
                                                            <div class="ui-material">
                                                                <p:inputText id="metaInd" placeholder="Meta del Indicador" value="#{administracionPlanEstudioDirector.rol.alineacionAcedemica.meta}"/>
                                                                <p:outputLabel for="metaInd" value="Meta del Indicador"/>
                                                                <p:message for="metaInd"/>
                                                                <br/>
                                                            </div>
                                                        </div>
                                                    </c:if>                                                
                                                </p:outputPanel>

                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:tabView id="tablasResultado">
                                                            <p:tab title="Catalogs Para Alineacion" rendered="#{administracionPlanEstudioDirector.rol.listalineacionAcedemica.size() ne 0}">
                                                                <p:dataTable id="ob" var="catalogo" value="#{administracionPlanEstudioDirector.rol.listalineacionAcedemica}" sortBy="#{catalogo.planEstudio.idPlanEstudio}">
                                                                    <p:columnGroup type="header">
                                                                        <p:row class="success">
                                                                            <p:column rowspan="2" headerText="Plan Estudio" style="width: 30%;"/> 
                                                                            <p:column rowspan="2" headerText="Tipo registro" style="width: 10%;"/> 
                                                                            <p:column rowspan="2" headerText="Clave" style="width: 10%;"/>
                                                                            <p:column rowspan="2" headerText="Descripcion" style="width: 50%;"/>
                                                                        </p:row>
                                                                    </p:columnGroup>

                                                                    <p:column groupRow="true">
                                                                        <h:outputText value="#{catalogo.planEstudio.idPlanEstudio} -- #{catalogo.planEstudio.descripcion}" />                               
                                                                    </p:column>
                                                                    <p:column  groupRow="true">
                                                                        <h:outputText value="#{catalogo.tipoR eq 'Ob'?('Objetivo Educacional'):(catalogo.tipoR eq 'Ae'?('Atributo Egreso'):(catalogo.tipoR eq 'In'?('Indicador'):(catalogo.tipoR eq 'Cr'?('Criterio Desempeño'):'')))}" />                               
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="#{catalogo.clave}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="#{catalogo.descripcion}" />
                                                                    </p:column>
                                                                </p:dataTable>
                                                            </p:tab>
                                                            <p:tab title="Alineacion Plantilla" rendered="#{administracionPlanEstudioDirector.rol.listaAlineacionVistaP.size() ne 0}">
                                                                <p:dataTable id="alineacionPlan" var="catalogo" value="#{administracionPlanEstudioDirector.rol.listaAlineacionVistaP}" sortBy="#{catalogo.planEstudio.idPlanEstudio}">
                                                                    <p:columnGroup type="header">
                                                                        <p:row class="success">
                                                                            <p:column rowspan="2" headerText="Plan Estudio" style="width: 20%;"/> 
                                                                            <p:column rowspan="2" headerText="Materia" style="width: 15%;"/> 
                                                                            <p:column rowspan="2" headerText="Tipo registro" style="width: 10%;"/> 
                                                                            <p:column rowspan="2" headerText="Clave" style="width: 10%;"/>
                                                                            <p:column rowspan="2" headerText="Descripcion" style="width: 35%;"/>
                                                                            <p:column rowspan="2" headerText="Nota" style="width: 10%;"/>
                                                                        </p:row>
                                                                    </p:columnGroup>

                                                                    <p:column groupRow="true">
                                                                        <h:outputText value="#{catalogo.planEstudio.idPlanEstudio} -- #{catalogo.planEstudio.descripcion}" />                               
                                                                    </p:column>
                                                                    <p:column groupRow="true">
                                                                        <h:outputText value="#{catalogo.planEstudioMateria.claveMateria} -- #{catalogo.planEstudioMateria.idMateria.nombre}" />                               
                                                                    </p:column>
                                                                    <p:column groupRow="true">
                                                                        <h:outputText value="#{catalogo.tipoR eq 'Ob'?('Objetivo Educacional'):(catalogo.tipoR eq 'Ae'?('Atributo Egreso'):(catalogo.tipoR eq 'In'?('Indicador'):(catalogo.tipoR eq 'Cr'?('Criterio Desempeño'):'')))}" />                               
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="#{catalogo.clave}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="#{catalogo.descripcion}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="Nivel de aportacion: #{catalogo.nivelA}" rendered="#{catalogo.tipoR eq 'Ob'}" />  
                                                                        <h:outputText value="% de Meta Propuesta: #{catalogo.meta} %" rendered="#{catalogo.tipoR eq 'In'}" />  
                                                                        <h:outputText value="" />  
                                                                    </p:column>
                                                                </p:dataTable>
                                                            </p:tab>
                                                            <p:tab title="Alineacion">
                                                                <p:remoteCommand name="actualizarTabla" actionListener="#{administracionPlanEstudioDirector.metodoBase()}" update="unidadesResultados" />
                                                                <p:dataTable id="unidadesResultados" var="com" value="#{administracionPlanEstudioDirector.rol.acedemicas}" sortBy="#{com.planEstudioMateria.claveMateria}"
                                                                             editable="true" editMode="row" widgetVar="dtbPoaEvaluacion" rowKey="#{com.ide}" expandableRowGroups="true">

                                                                    <f:facet name="header">
                                                                        #{administracionPlanEstudioDirector.rol.alineacionAcedemica.planEstudio.descripcion}
                                                                    </f:facet>
                                                                    <p:columnGroup type="header">
                                                                        <p:row class="success">
                                                                            <p:column rowspan="2" headerText="Clave" style="width: 5%;"/>
                                                                            <p:column rowspan="2" headerText="Nivel Programa" style="width: 25%;" />
                                                                            <p:column rowspan="2" headerText="Descripción" style="width: 59%;"/> 
                                                                            <p:column rowspan="2" headerText="Nivel" style="width: 6%;" rendered="#{administracionPlanEstudioDirector.rol.newRegiistroOe}"/>
                                                                            <p:column rowspan="2" headerText="Meta" style="width: 5%;" rendered="#{administracionPlanEstudioDirector.rol.newRegiistroIn}"/>
                                                                            <p:column rowspan="2" headerText="" style="width: 32px;"/> 
                                                                            <!--p:column rowspan="2" headerText="" style="width: 50px;"/--> 
                                                                        </p:row>
                                                                    </p:columnGroup>


                                                                    <p:headerRow>
                                                                        <p:column colspan="#{administracionPlanEstudioDirector.rol.newRegiistroOe eq true ?'5':
                                                                                             administracionPlanEstudioDirector.rol.newRegiistroIn eq true ?'5':'4'}" style="text-align: justify" styleClass="lac">
                                                                            <!--p:column colspan="# {administracionPlanEstudioDirector.rol.newRegiistroOe eq true ?'6':
                                                                                             administracionPlanEstudioDirector.rol.newRegiistroIn eq true ?'6':'5'}" style="text-align: justify" styleClass="lac"-->
                                                                            <h:outputText value="#{com.planEstudioMateria.grado}° Cuatrimestre -- #{com.planEstudioMateria.claveMateria} -- #{com.planEstudioMateria.idMateria.nombre}"/>
                                                                        </p:column>
                                                                    </p:headerRow>

                                                                    <p:ajax event="rowEdit" listener="#{administracionPlanEstudioDirector.onRowEditAlineacion}" update="unidadesResultados" />
                                                                    <p:ajax event="rowEditCancel" listener="#{administracionPlanEstudioDirector.onRowCancel}" update="unidadesResultados" />

                                                                    <p:column>
                                                                        <h:outputText value="#{com.clave}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="#{com.planEstudio.descripcion}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:cellEditor>
                                                                            <f:facet name="output"><h:outputText value="#{com.descripcion}" /></f:facet>
                                                                            <f:facet name="input"><p:inputTextarea value="#{com.descripcion}" /></f:facet>
                                                                        </p:cellEditor>                                                            
                                                                    </p:column>
                                                                    <p:column rendered="#{administracionPlanEstudioDirector.rol.newRegiistroOe}">
                                                                        <p:cellEditor>
                                                                            <f:facet name="output"><h:outputText value="#{com.nivelA}"/></f:facet>
                                                                            <f:facet name="input">
                                                                                <p:selectOneMenu value="#{com.nivelA}" style="width:100%">
                                                                                    <f:selectItem itemValue="" itemLabel="No Aplica"/>
                                                                                    <f:selectItem itemValue="Avanzado" itemLabel="Avanzado"/>
                                                                                    <f:selectItem itemValue="Medio" itemLabel="Medio"/>
                                                                                    <f:selectItem itemValue="Introductorio" itemLabel="Introductorio"/>
                                                                                </p:selectOneMenu>
                                                                            </f:facet>
                                                                        </p:cellEditor>  
                                                                    </p:column>
                                                                    <p:column rendered="#{administracionPlanEstudioDirector.rol.newRegiistroIn}">
                                                                        <p:cellEditor>
                                                                            <f:facet name="output"><h:outputText value="#{com.meta}"/></f:facet>
                                                                            <f:facet name="input"><p:inputTextarea value="#{com.meta}" /></f:facet>
                                                                        </p:cellEditor>  
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:rowEditor />
                                                                    </p:column>
                                                                    <!--p:column>
                                                                        <p:commandButton actionListener="# {administracionPlanEstudioDirector.eliminarAlineacionE(com)}" update="@this" oncomplete="actualizarTabla()" icon="fa fa-trash" 
                                                                                         onsuccess="PF('alineacionFrm').update();" styleClass="btn-primary" title="Eliminar Alineación">
                                                                            <p:confirm header="Confirmación" message="¿Confirma la eliminación de la alineacion del objetivo # {com.descripcion} de la materia # {com.planEstudioMateria.claveMateria}?" icon="ui-icon-alert" />
                                                                        </p:commandButton>
                                                                    </p:column-->
                                                                </p:dataTable>


                                                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                                                                </p:confirmDialog>   
                                                            </p:tab>
                                                        </p:tabView>
                                                        <br/>
                                                    </div>
                                                </div>
                                            </div>
                                        </h:form>
                                    </p:tab>
                                    <p:tab title="Nivel de Desempeño">
                                        <h:form id="desempeniosFrm">
                                            <div id="main-buttons-asignatura" class="hidden-sm hidden-xs">
                                                <p:toolbar id="tb-asignatura">
                                                    <f:facet name="left">

                                                        <p:spacer width="5" />

                                                    </f:facet>
                                                    <f:facet name="right">
                                                        <p:commandLink class="btn btn-info" ajax="false" target="_blank" action="#{administracionPlanEstudioDirector.descargarPlantillaNivelesDesempenios()}" title="Descargar Plantilla"><i class="fa fa-download" /></p:commandLink>
                                                        <span class="ui-separator"/>
                                                        <p:commandButton title="Cargar Excel" icon="fa fa-upload" onclick="PF('modalCargaArchivoNivelD').show()" class="btn btn-primary btn-sm"/>
                                                        <span class="ui-separator"/>
                                                        <p:commandButton title="Guardar Alineacion" icon="fa fa-save" styleClass="btn-success" update="@form" actionListener="#{administracionPlanEstudioDirector.guardarMetasPlantilla()}" rendered="#{administracionPlanEstudioDirector.rol.metasPropuestasesPlantilla.size() ne 0}"/>
                                                        <span class="ui-separator"><span class="ui-icon ui-icon-grip-dotted-vertical" /></span>
                                                        <p:commandButton title="Guardar Materias" icon="fa fa-save" styleClass="btn-success" update="@form" actionListener="#{administracionPlanEstudioDirector.guardarMetas()}"/>
                                                    </f:facet>
                                                </p:toolbar>
                                            </div>
                                            <div class="ui-g ui-fluid" style="margin-top: 20px;">                                            
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="planEstudioC" value="#{administracionPlanEstudioDirector.rol.materiaMetasPropuestas.planEstudio}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.planesEstudio}" var="planEstudio" itemValue="#{planEstudio}" itemLabel="#{planEstudio.descripcion}" />
                                                            <p:ajax listener="#{administracionPlanEstudioDirector.nivelesDesempenioPlanEstudioMateriaConsulta()}" update="@form" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="planEstudioC" value="Plan de estudios"/>
                                                        <p:message for="planEstudioC"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="materiaRegistradaC" value="#{administracionPlanEstudioDirector.rol.materiaMetasPropuestas.materia}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.planEstudioMaterias}" var="meteriasR" itemValue="#{meteriasR}" itemLabel="#{meteriasR.grado}-#{meteriasR.claveMateria}-#{meteriasR.idMateria.nombre}" />
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="materiaRegistradaC" value="Materia"/>
                                                        <p:message for="materiaRegistradaC"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputTextarea id="autonomo" placeholder="Mayor que 9 y menor que 10 (Autónomo)" value="#{administracionPlanEstudioDirector.rol.materiaMetasPropuestas.metasPropuestas.autonomo}"/>
                                                        <p:outputLabel for="autonomo" value="Mayor que 9 y menor que 10 (Autónomo)"/>
                                                        <p:message for="autonomo"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputTextarea id="destacado" placeholder="Mayor que 8.5 y menor que 9 (Destacado)" value="#{administracionPlanEstudioDirector.rol.materiaMetasPropuestas.metasPropuestas.destacado}"/>
                                                        <p:outputLabel for="destacado" value="Mayor que 8.5 y menor que 9 (Destacado)"/>
                                                        <p:message for="destacado"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputTextarea id="satisfactorio" placeholder="Mayor que 8 y menor que 8.5 (Satisfactorio)" value="#{administracionPlanEstudioDirector.rol.materiaMetasPropuestas.metasPropuestas.satisfactorio}"/>
                                                        <p:outputLabel for="satisfactorio" value="Mayor que 8 y menor que 8.5 (Satisfactorio)"/>
                                                        <p:message for="satisfactorio"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-6 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:inputTextarea id="noacreditado" placeholder="Menor que 8 (No Acreditado)" value="#{administracionPlanEstudioDirector.rol.materiaMetasPropuestas.metasPropuestas.noAcreditado}"/>
                                                        <p:outputLabel for="noacreditado" value="Menor que 8 (No Acreditado)"/>
                                                        <p:message for="noacreditado"/>
                                                        <br/>
                                                    </div>
                                                </div>

                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:tabView>
                                                            <p:tab title="Niveles de Desempeño Plantilla" rendered="#{administracionPlanEstudioDirector.rol.metasPropuestasesPlantilla.size() ne 0}">
                                                                <p:dataTable id="nivelesPlantilla" var="com" value="#{administracionPlanEstudioDirector.rol.metasPropuestasesPlantilla}" sortBy="#{com.idPlanMateria.idPlan.idPlanEstudio}">
                                                                    <f:facet name="header">
                                                                    </f:facet>
                                                                    <p:columnGroup type="header">
                                                                        <p:row class="success">
                                                                            <p:column rowspan="2" headerText="Plan de Estudios" style="width: 10%;"/> 
                                                                            <p:column rowspan="2" headerText="Materia" style="width: 10%;"/> 
                                                                            <p:column rowspan="2" headerText="Autónomo" style="width: 20%;"/> 
                                                                            <p:column rowspan="2" headerText="Destacado" style="width: 20%;"/> 
                                                                            <p:column rowspan="2" headerText="Satisfactorio" style="width: 20%;"/> 
                                                                            <p:column rowspan="2" headerText="No Acreditado" style="width: 20%;"/>
                                                                        </p:row>
                                                                    </p:columnGroup>

                                                                    <p:column groupRow="true">
                                                                        <h:outputText value="#{com.idPlanMateria.idPlan.descripcion}" />
                                                                    </p:column>
                                                                    <p:column groupRow="true">
                                                                        <h:outputText value="#{com.idPlanMateria.claveMateria}-#{com.idPlanMateria.idMateria.nombre}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="#{com.autonomo}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="#{com.destacado}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="#{com.satisfactorio}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <h:outputText value="#{com.noAcreditado}" />
                                                                    </p:column>
                                                                </p:dataTable>
                                                            </p:tab>
                                                            <p:tab title="Niveles de Desempeño">
                                                                <p:dataTable id="unidadesResultados" var="com" value="#{administracionPlanEstudioDirector.rol.propuestases}" sortBy="#{com.idPlanMateria.idPlanMateria}"
                                                                             editable="true" editMode="row">
                                                                    <f:facet name="header">
                                                                        #{administracionPlanEstudioDirector.rol.materiaMetasPropuestas.materia.idPlan.descripcion}
                                                                    </f:facet>
                                                                    <p:columnGroup type="header">
                                                                        <p:row class="success">
                                                                            <p:column rowspan="2" headerText="Materia" style="width: 20%;"/> 
                                                                            <p:column rowspan="2" headerText="Autónomo" style="width: 20%;"/> 
                                                                            <p:column rowspan="2" headerText="Destacado" style="width: 20%;"/> 
                                                                            <p:column rowspan="2" headerText="Satisfactorio" style="width: 20%;"/> 
                                                                            <p:column rowspan="2" headerText="No Acreditado" style="width: 20%;"/>
                                                                            <p:column rowspan="2" headerText="" style="width: 32px;"/> 
                                                                        </p:row>
                                                                    </p:columnGroup>

                                                                    <p:ajax event="rowEdit" listener="#{administracionPlanEstudioDirector.onRowEditMetasPrupuestas}" update="unidadesResultados" />
                                                                    <p:ajax event="rowEditCancel" listener="#{administracionPlanEstudioDirector.onRowCancel}" update="unidadesResultados" />

                                                                    <p:column groupRow="true">
                                                                        <h:outputText value="#{com.idPlanMateria.claveMateria}-#{com.idPlanMateria.idMateria.nombre}" />
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:cellEditor>
                                                                            <f:facet name="output"><h:outputText value="#{com.autonomo}" /></f:facet>
                                                                            <f:facet name="input"><p:inputTextarea value="#{com.autonomo}" /></f:facet>
                                                                        </p:cellEditor>   
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:cellEditor>
                                                                            <f:facet name="output"><h:outputText value="#{com.destacado}" /></f:facet>
                                                                            <f:facet name="input"><p:inputTextarea value="#{com.destacado}" /></f:facet>
                                                                        </p:cellEditor>   
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:cellEditor>
                                                                            <f:facet name="output"><h:outputText value="#{com.satisfactorio}" /></f:facet>
                                                                            <f:facet name="input"><p:inputTextarea value="#{com.satisfactorio}" /></f:facet>
                                                                        </p:cellEditor>   
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:cellEditor>
                                                                            <f:facet name="output"><h:outputText value="#{com.noAcreditado}" /></f:facet>
                                                                            <f:facet name="input"><p:inputTextarea value="#{com.noAcreditado}" /></f:facet>
                                                                        </p:cellEditor>   
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:rowEditor />
                                                                    </p:column>
                                                                </p:dataTable>
                                                            </p:tab>
                                                        </p:tabView>
                                                        <br/>
                                                    </div>
                                                </div>
                                            </div>
                                        </h:form>
                                    </p:tab>
                                    <p:tab title="Programas educativos">
                                        <h:form id="progEduFrm">
                                            <div id="main-buttons-asignatura" class="hidden-sm hidden-xs">
                                                <p:toolbar id="tb-asignatura">
                                                    <f:facet name="left">

                                                        <p:spacer width="5" />

                                                    </f:facet>
                                                    <f:facet name="right">
                                                        <p:commandButton title="Guardar Materias" icon="fa fa-save" styleClass="btn-success" update="@form" style="visibility: hidden" actionListener="#{administracionPlanEstudioDirector.guardarPlanEstudioMateriaCompetencia()}"/>
                                                    </f:facet>
                                                </p:toolbar>
                                            </div>
                                            <div class="ui-g ui-fluid" style="margin-top: 20px;">                                            
                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">
                                                        <p:selectOneMenu id="planEstudioC" value="#{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetencias1.planEstudio}" converter="entityConverter">
                                                            <f:selectItem itemValue="#{null}"/>
                                                            <f:selectItems value="#{administracionPlanEstudioDirector.rol.planesEstudio}" var="planEstudio" itemValue="#{planEstudio}" itemLabel="#{planEstudio.descripcion}" />
                                                            <p:ajax listener="#{administracionPlanEstudioDirector.listaCompetenciasPorMateria()}" update="progEduFrm" process="@this"/>
                                                        </p:selectOneMenu>
                                                        <p:outputLabel for="planEstudioC" value="Plan de estudios"/>
                                                        <p:message for="planEstudioC"/>
                                                        <br/>
                                                    </div>
                                                </div>
                                                <div class="ui-g-12 ui-sm-12">
                                                    <div class="ui-material">

                                                        <p:dataTable id="unidadesResultados" var="um" value="#{administracionPlanEstudioDirector.rol.planEstudioMateriaCompetenciasesList}" 
                                                                     sortBy="#{um.planEstudioMateria.grado}"  expandedRow="true" expandableRowGroups="true">
                                                            <f:facet name="header">
                                                                #{administracionPlanEstudioDirector.rol.materiaPlanEstudio1.planEstudio.descripcion}
                                                            </f:facet>
                                                            <p:columnGroup type="header">
                                                                <p:row class="success">
                                                                    <p:column rowspan="2" headerText="Cuatrimestre" style="width: 6%;"/>
                                                                    <p:column rowspan="2" headerText="Área Conocimiento" style="width: 10%;"/> 
                                                                    <p:column rowspan="2" headerText="Clave materia" style="width: 10%;"/>
                                                                    <p:column rowspan="2" headerText="Materia" style="width: 14%;"/>                                                                 
                                                                    <p:column rowspan="2" headerText="Competencias" style="width: 58%;"/> 
                                                                </p:row>
                                                            </p:columnGroup>   
                                                            <p:column groupRow="true">
                                                                <h:outputText value="#{um.planEstudioMateria.grado}" />
                                                            </p:column>
                                                            <p:column groupRow="true">
                                                                <h:outputText value="#{um.planEstudioMateria.idMateria.idAreaConocimiento.nombre}" />
                                                            </p:column>
                                                            <p:column groupRow="true">
                                                                <h:outputText value="#{um.planEstudioMateria.claveMateria}" />
                                                            </p:column>
                                                            <p:column groupRow="true">
                                                                <h:outputText value="#{um.planEstudioMateria.idMateria.nombre}" />
                                                            </p:column>
                                                            <p:column>
                                                                <h:outputText value="#{um.competencia.nombre}" />
                                                            </p:column>

                                                            <p:rowExpansion>
                                                                <p:dataTable  var="unidad" value="#{um.planEstudioMateria.idMateria.unidadMateriaList}">
                                                                    <p:columnGroup type="header">
                                                                        <p:row class="success">
                                                                            <p:column rowspan="2" headerText="Numero" style="width: 10%;background-color: #d9d9d9; color: #000000;" styleClass="hederTablesTitle"/>
                                                                            <p:column rowspan="2" headerText="Nombre" style="width: 20%; background-color: #d9d9d9; color: #000000;" styleClass="hederTablesTitle"/>  
                                                                            <p:column rowspan="2" headerText="Objetivo" style="width:40%; background-color: #d9d9d9; color: #000000;" styleClass="hederTablesTitle"/>
                                                                            <p:column colspan="3" headerText="Horas" style="width: 30%;text-align: center; background-color: #d9d9d9; color: #000000;" styleClass="hederTablesTitle"/> 
                                                                        </p:row>
                                                                        <p:row class="success">
                                                                            <p:column headerText="Teoricas"/>
                                                                            <p:column headerText="Practicas"/>
                                                                            <p:column headerText="Totales"/>
                                                                        </p:row>
                                                                    </p:columnGroup>

                                                                    <p:column style="text-align: center;"> <h:outputText value="#{unidad.noUnidad}" /> </p:column>
                                                                    <p:column style="text-align: justify;"> <h:outputText value="#{unidad.nombre}" /> </p:column>
                                                                    <p:column style="text-align: justify;"> <h:outputText value="#{unidad.objetivo}" /> </p:column>
                                                                    <p:column style="text-align: center;"> <h:outputText value="#{unidad.horasTeoricas}" /> </p:column>
                                                                    <p:column style="text-align: center;"> <h:outputText value="#{unidad.horasPracticas}" /> </p:column>
                                                                    <p:column style="text-align: center;"> <h:outputText value="#{(unidad.horasPracticas + unidad.horasTeoricas)}" /> </p:column>

                                                                </p:dataTable>
                                                            </p:rowExpansion>
                                                        </p:dataTable>
                                                        <br/>
                                                    </div>
                                                </div>
                                            </div>
                                        </h:form>
                                    </p:tab>
                                </p:tabView>
                            </div>
                        </div>
                    </div>

                    <p:dialog widgetVar="modalCargaArchivo" width="400" height="auto" showEffect="fade" hideEffect="fade" modal="true" header="Carga de Archivo" styleClass="panel panel-primary" responsive="true" resizable="false" maximizable="false">
                        <center>
                            <h:form id="formularioContenedor" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col-md-12">
                                        <o:inputFile id="file" value="#{controladorArchivoRegistroEvidInst.fileCatalogos}" 
                                                     accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" acceptMessage="Solo se permiten archivos XLSX." 
                                                     maxsize="#{100*1024*1024}" maxsizeMessage="El tamaño máximo permitido son 100MB." 
                                                     required="true" requiredMessage="Debe elegir un archivo." >
                                        </o:inputFile>
                                        <p:messages for="file" ><p:autoUpdate/></p:messages>
                                    </div>
                                    <p:separator />
                                    <div class="col-md-12">
                                        <h:commandButton id="btnuploadFile" value="Subir archivo" class="btn btn-primary"  action="#{controladorArchivoRegistroEvidInst.subirExcelCatalogos()}"/>
                                    </div>
                                </div>
                            </h:form>
                            <p:blockUI block="formularioContenedor" widgetVar="bloqueoCargaFile" trigger="formularioContenedor:btnuploadFile">
                                Cargando archivo espere por favor.<br />
                            </p:blockUI>
                        </center>
                    </p:dialog>

                    <p:dialog widgetVar="modalCargaArchivoAlineacion" width="400" height="auto" showEffect="fade" hideEffect="fade" modal="true" header="Carga de Archivo" styleClass="panel panel-primary" responsive="true" resizable="false" maximizable="false">
                        <center>
                            <h:form id="formularioContenedorAlineacion" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col-md-12">
                                        <o:inputFile id="file" value="#{controladorArchivoRegistroEvidInst.fileAlineacion}" 
                                                     accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" acceptMessage="Solo se permiten archivos XLSX." 
                                                     maxsize="#{100*1024*1024}" maxsizeMessage="El tamaño máximo permitido son 100MB." 
                                                     required="true" requiredMessage="Debe elegir un archivo." >
                                        </o:inputFile>
                                        <p:messages for="file" ><p:autoUpdate/></p:messages>
                                    </div>
                                    <p:separator />
                                    <div class="col-md-12">
                                        <h:commandButton id="btnuploadFile" value="Subir archivo" class="btn btn-primary"  action="#{controladorArchivoRegistroEvidInst.subirExcelAlineacion()}"/>
                                    </div>
                                </div>
                            </h:form>
                            <p:blockUI block="formularioContenedorAlineacion" widgetVar="bloqueoCargaFile" trigger="formularioContenedorAlineacion:btnuploadFile">
                                Cargando archivo espere por favor.<br />
                            </p:blockUI>
                        </center>
                    </p:dialog>

                    <p:dialog widgetVar="modalCargaArchivoNivelD" width="400" height="auto" showEffect="fade" hideEffect="fade" modal="true" header="Carga de Archivo" styleClass="panel panel-primary" responsive="true" resizable="false" maximizable="false">
                        <center>
                            <h:form id="formularioContenedorNivelD" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col-md-12">
                                        <o:inputFile id="file" value="#{controladorArchivoRegistroEvidInst.fileNivelesD}" 
                                                     accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" acceptMessage="Solo se permiten archivos XLSX." 
                                                     maxsize="#{100*1024*1024}" maxsizeMessage="El tamaño máximo permitido son 100MB." 
                                                     required="true" requiredMessage="Debe elegir un archivo." >
                                        </o:inputFile>
                                        <p:messages for="file" ><p:autoUpdate/></p:messages>
                                    </div>
                                    <p:separator />
                                    <div class="col-md-12">
                                        <h:commandButton id="btnuploadFile" value="Subir archivo" class="btn btn-primary"  action="#{controladorArchivoRegistroEvidInst.subirExcelNiveles()}"/>
                                    </div>
                                </div>
                            </h:form>
                            <p:blockUI block="formularioContenedorNivelD" widgetVar="bloqueoCargaFile" trigger="formularioContenedorNivelD:btnuploadFile">
                                Cargando archivo espere por favor.<br />
                            </p:blockUI>
                        </center>
                    </p:dialog>

                </c:if>
                <c:if test="#{!administracionPlanEstudioDirector.tieneAcceso}">
                    <p:panel id="box-colors-panel" header="Acceso no autorizado" styleClass="box-fatal box-solid">
                        <h:panelGrid columns="2" cellpadding="10">
                            <h:outputText
                                value="El acceso solo está autorizado a directores de área académica."/>
                        </h:panelGrid>
                        <f:facet name="footer">

                        </f:facet>
                    </p:panel>
                </c:if>

            </div>
        </c:if>
    </ui:define>
</ui:composition>
