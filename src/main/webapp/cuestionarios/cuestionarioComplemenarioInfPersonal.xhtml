<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:adm="http://github.com/adminfaces"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                template="#{layoutMB.template}"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui">

    <ui:define name="head-end">
        <h:outputStylesheet library="css" name="tablaDatos.css"/>
        <!-- Inicio estilos par proceso electoral -->
        <c:if test="#{utilidadesAcceso.procesoElectoralActivo}">
            <link rel="stylesheet" type="text/css" href="../resources/css/procesoElectoral.css" media="screen"/>
        </c:if>
        <!-- Fin estilos par proceso electoral -->
    </ui:define>

    <ui:define name="title">
        Cuestionario complementario de información personal
    </ui:define>

    <ui:define name="description">

    </ui:define>

    <ui:define name="head-end">
        <h:outputStylesheet library="css" name="tablaDatos.css"/>
        <h:outputScript library="js" name="dialogs.js"/>
    </ui:define>
    <ui:define name="description">
        
    </ui:define>

    <ui:define name="body">
        <adm:breadcrumb title="Cuestionario complementario de inf. personal"/>
            <div class="contenedor">
                <c:if test="#{cuestionarioComplementarioInfPersonal.tieneAcceso}">
                    <h:form id="frmCuestionario" prependId="false" class="form-inline">
                        <p:autoUpdate/>
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <div class="box box-solid">
                                    <p:toolbar id="tb2" style="size: 250px">
                                        <f:facet  name="right">
                                            <c:if test="#{cuestionarioComplementarioInfPersonal.rol.finalizado}">
                                                <h4><span class="label label-success"><i class="fa fa-check" />Finalizado.</span></h4>
                                            </c:if>
                                            <c:if test="#{!cuestionarioComplementarioInfPersonal.rol.finalizado}">
                                                <h4><span class="label label-danger"><i class="fa fa-close" />Pendiente</span></h4>
                                            </c:if>

                                        </f:facet>
                                    </p:toolbar>
                                    <p:sticky target="tb2" />
                                    <div class="box-header with-border">
                                        <h3 class="box-title">
                                            <div class="col-md-12">
                                                <p>
                                                    <b>Estimada(o):</b> Con el objetivo de reunir la información necesaria para fines estadísticos
                                                        se solicita nos apoyes en responder el siguiente cuestionario, bajo los criterios de confidencialidad y profesionalismo.
                                                </p>
                                            </div>
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="box-header with-border">

                                    <c:set var="index" value="#{0}" />
                                    <div class="row">
                                        <div class="panel panel-primary" style="max-width: 1200px;margin: auto; font-size: large;">
                                            <div class="panel-heading aceptado">
                                                <h3 class="panel-title" style="text-align: justify;">
                                                </h3>
                                            </div>
                                            <table class="table table-striped table-responsive">
                                                <thead>
                                                <tr class="denegado">
                                                    <th>#</th>
                                                    <th>Pregunta</th>
                                                    <th style="text-align: center; width: 200px;">Respuesta</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <c:set var="pregunta" value="#{cuestionarioComplementarioInfPersonal.rol.preguntas[0].preguntas[index]}" />
                                                <!-- 1 -->
                                                <tr>
                                                    <td><h:outputLabel value="1)"></h:outputLabel></td>
                                                    <td style="text-align: justify;">#{pregunta.titulo}</td>
                                                    <td class="text-center" style="min-width: 500px;">
                                                        <f:ajax execute="r#{1}">
                                                            <p:selectOneButton  id="r#{1}" value="#{cuestionarioComplementarioInfPersonal.rol.resultados.r1lenguaIndigina}"
                                                                                valueChangeListener="#{cuestionarioComplementarioInfPersonal.guardar}">
                                                                <f:selectItems class="btn-primary" value="#{cuestionarioComplementarioInfPersonal.rol.siNo}" />
                                                            </p:selectOneButton>
                                                        </f:ajax>
                                                        <c:set var="index" value="#{index+1}" />
                                                    </td>
                                                </tr>
                                                <!-- 2 -->
                                                <c:set var="pregunta" value="#{cuestionarioComplementarioInfPersonal.rol.preguntas[0].preguntas[index]}" />
                                                <c:if test="#{cuestionarioComplementarioInfPersonal.rol.resultados.r1lenguaIndigina eq 'Si'}">
                                                    <tr>
                                                        <td><h:outputLabel value="1a)"></h:outputLabel></td>
                                                        <td style="text-align: justify;">#{pregunta.titulo}</td>
                                                        <td class="text-center" style="min-width: 120px;">
                                                            <f:ajax execute="r#{2}">
                                                                <p:selectOneMenu id="r#{2}" value="#{cuestionarioComplementarioInfPersonal.rol.resultados.r2tipoLengua}" disabled="#{cuestionarioComplementarioInfPersonal.rol.resultados.r1lenguaIndigina eq 'Si'?false:true}" valueChangeListener="#{cuestionarioComplementarioInfPersonal.guardar}">
                                                                    <f:selectItem itemValue="#{null}" itemLabel="Seleccione una opción"/>
                                                                    <f:selectItems value="#{cuestionarioComplementarioInfPersonal.rol.lenguaIndigenas}" var="li" itemLabel="#{li.nombre}" itemValue="#{li.idLenguaIndigena}"/>
                                                                </p:selectOneMenu>
                                                            </f:ajax>
                                                        </td>
                                                    </tr>
                                                </c:if>
                                                <c:set var="index" value="#{index+1}" />
                                                <!-- 3 -->
                                                <c:set var="pregunta" value="#{cuestionarioComplementarioInfPersonal.rol.preguntas[0].preguntas[index]}" />
                                                <tr>
                                                    <td><h:outputLabel value="2)"></h:outputLabel></td>
                                                    <td style="text-align: justify;">#{pregunta.titulo}</td>
                                                    <td class="text-center" style="min-width: 120px;">
                                                        <f:ajax execute="r#{3}">
                                                            <p:selectOneButton  id="r#{3}" value="#{cuestionarioComplementarioInfPersonal.rol.resultados.r3Discapacidad}"
                                                                                valueChangeListener="#{cuestionarioComplementarioInfPersonal.guardar}">
                                                                <f:selectItems class="btn-primary" value="#{cuestionarioComplementarioInfPersonal.rol.siNo}" />
                                                            </p:selectOneButton>
                                                        </f:ajax>
                                                        <c:set var="index" value="#{index+1}" />
                                                    </td>
                                                </tr>
                                                <!-- 4 -->
                                                <c:set var="pregunta" value="#{cuestionarioComplementarioInfPersonal.rol.preguntas[0].preguntas[index]}" />
                                                <c:if test="#{cuestionarioComplementarioInfPersonal.rol.resultados.r3Discapacidad eq 'Si'}">
                                                    <tr>
                                                        <td><h:outputLabel value="2a)"></h:outputLabel></td>
                                                        <td style="text-align: justify;">#{pregunta.titulo}</td>
                                                        <td class="text-center" style="min-width: 120px;">
                                                            <f:ajax execute="r#{4}">
                                                                <p:selectOneMenu id="r#{4}" value="#{cuestionarioComplementarioInfPersonal.rol.resultados.r4tipoDiscapacidad}" disabled="#{cuestionarioComplementarioInfPersonal.rol.resultados.r3Discapacidad eq 'Si'?false:true}" valueChangeListener="#{cuestionarioComplementarioInfPersonal.guardar}">
                                                                    <f:selectItem itemValue="#{null}" itemLabel="Seleccione una opción"/>
                                                                    <f:selectItems value="#{cuestionarioComplementarioInfPersonal.rol.tipoDiscapacidads}" var="di" itemLabel="#{di.nombre}" itemValue="#{di.idTipoDiscapacidad}"/>
                                                                </p:selectOneMenu>
                                                            </f:ajax>
                                                        </td>
                                                    </tr>
                                                </c:if>
                                                <c:set var="index" value="#{index+1}" />
                                                <!-- 5 Tipo de sangre-->
                                                <c:set var="pregunta" value="#{cuestionarioComplementarioInfPersonal.rol.preguntas[0].preguntas[index]}" />
                                                <tr>
                                                    <td><h:outputLabel value="3)"></h:outputLabel></td>
                                                    <td style="text-align: justify;">#{pregunta.titulo}</td>
                                                    <td class="text-center" style="min-width: 120px;">
                                                        <f:ajax execute="r#{5}">
                                                            <p:selectOneMenu id="r#{5}" value="#{cuestionarioComplementarioInfPersonal.rol.resultados.r5tipoSangre}"  valueChangeListener="#{cuestionarioComplementarioInfPersonal.guardar}">
                                                                <f:selectItem itemValue="#{null}" itemLabel="Seleccione una opción"/>

                                                                <f:selectItems value="#{cuestionarioComplementarioInfPersonal.rol.tipoSangreList}" var="ts" itemLabel="#{ts.nombre}" itemValue="#{ts.idTipoSangre}"/>
                                                            </p:selectOneMenu>
                                                        </f:ajax>
                                                        <c:set var="index" value="#{index+1}" />
                                                    </td>
                                                </tr>
                                                <!-- 6 Estado civil -->
                                                <c:set var="pregunta" value="#{cuestionarioComplementarioInfPersonal.rol.preguntas[0].preguntas[index]}" />
                                                <tr>
                                                    <td><h:outputLabel value="4)"></h:outputLabel></td>
                                                    <td style="text-align: justify;">#{pregunta.titulo}</td>
                                                    <td class="text-center" style="min-width: 120px;">
                                                        <f:ajax execute="r#{6}">
                                                            <p:selectOneMenu id="r#{6}" value="#{cuestionarioComplementarioInfPersonal.rol.resultados.r6EstadoCivil}"  valueChangeListener="#{cuestionarioComplementarioInfPersonal.guardar}">
                                                                <f:selectItem itemValue="#{null}" itemLabel="Seleccione una opción"/>
                                                                <f:selectItem itemValue="Soltero (a)" itemLabel="Soltero (a)"/>
                                                                <f:selectItem itemValue="Unión Libre" itemLabel="Unión Libre"/>
                                                                <f:selectItem itemValue="Casado (a)" itemLabel="Casado (a)"/>
                                                                <f:selectItem itemValue="Separado (a)" itemLabel="Separado (a)"/>
                                                                <f:selectItem itemValue="Divorciado (a)" itemLabel="Divorciado (a)"/>
                                                                <f:selectItem itemValue="Viudo (a)" itemLabel="Viudo (a)"/>
                                                            </p:selectOneMenu>
                                                        </f:ajax>
                                                        <c:set var="index" value="#{index+1}" />
                                                    </td>
                                                </tr>
                                                <!-- 7 Número de hijos -->
                                                <c:set var="pregunta" value="#{cuestionarioComplementarioInfPersonal.rol.preguntas[0].preguntas[index]}" />
                                                <tr>
                                                    <td><h:outputLabel value="5)"></h:outputLabel></td>
                                                    <td style="text-align: justify;">#{pregunta.titulo}</td>
                                                    <td class="text-center" style="min-width: 120px;">
                                                        <f:ajax execute="r#{7}">
                                                            <p:spinner id="r#{7}" value="#{cuestionarioComplementarioInfPersonal.rol.resultados.r7noHijos}" valueChangeListener="#{cuestionarioComplementarioInfPersonal.guardar}" min="0" >
                                                            </p:spinner>
                                                        </f:ajax>
                                                        <c:set var="index" value="#{index+1}" />
                                                    </td>
                                                </tr>
                                                <!-- 8 Télefono celular-->
                                                <c:set var="pregunta" value="#{cuestionarioComplementarioInfPersonal.rol.preguntas[0].preguntas[index]}" />
                                                <tr>
                                                    <td><h:outputLabel value="6)"></h:outputLabel></td>
                                                    <td style="text-align: justify;">#{pregunta.titulo}</td>
                                                    <td class="text-center" style="min-width: 120px;">
                                                        <f:ajax execute="r#{8}">
                                                            <p:inputMask mask="(999)999-9999" id="r#{8}" class="form-control" placeholder="(999)-999-9999" value="#{cuestionarioComplementarioInfPersonal.rol.resultados.r8TelefonoCel}"  valueChangeListener="#{cuestionarioComplementarioInfPersonal.guardar}"/>
                                                        </f:ajax>
                                                        <c:set var="index" value="#{index+1}" />
                                                    </td>
                                                </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </h:form>
        
        </c:if>
        <c:if test="#{!cuestionarioComplementarioInfPersonal.tieneAcceso}">
                <p:panel id="box-colors-panel" header="Acceso no autorizado" styleClass="box-fatal box-solid">
                    <h:panelGrid columns="2" cellpadding="10">
                        <h:outputText value="El acceso solo está autorizado a personal activo."/>
                    </h:panelGrid>
                    <f:facet name="footer"></f:facet>
                </p:panel>
        </c:if>
            
        </div>
        
        
        
        <script>
            //collapseSidebar(); activar para colapsar barra lateral
        </script>
    </ui:define>
</ui:composition>
